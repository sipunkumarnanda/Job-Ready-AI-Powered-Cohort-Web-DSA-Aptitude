

# Notes on `app.use(cookieParser())`

---

### 1. What is `cookieParser()`

* It is a **middleware** in Express.js.
* Used to **parse cookies** that come from the client (browser or Postman).
* It makes the cookies available in **`req.cookies`** as a JavaScript object.
* Must be installed separately using `npm install cookie-parser`.

---

### 2. Why we use it

* When a client sends cookies, they are sent in the HTTP header like this:

  ```
  Cookie: token=abc123; theme=dark
  ```
* Express receives this as one **long string**.
* The server cannot easily read or separate each cookie value.
* `cookieParser()` breaks this string into **key-value pairs** and gives you a clean object.

---

### 3. How it works (step-by-step)

1. Client sends cookies along with the request.
2. Express receives them as a string in the request header.
3. `cookieParser()` middleware reads that header.
4. It splits the cookies and creates a JavaScript object.
5. This object is stored in `req.cookies`.
6. You can access cookies easily in your routes.

---

### 4. Example

```js
const express = require('express')
const cookieParser = require('cookie-parser')

const app = express()
app.use(cookieParser())  // use cookie-parser middleware

app.get('/', (req, res) => {
  console.log(req.cookies)
  res.send('Cookies parsed!')
})
```

If the client sends this header:

```
Cookie: token=abc123; theme=dark
```

Output on server:

```js
{ token: 'abc123', theme: 'dark' }
```

Now you can use:

```js
req.cookies.token
req.cookies.theme
```

---

### 5. Signed cookies (optional)

You can add a secret key for **signed cookies**:

```js
app.use(cookieParser('mysecret'))
```

* Signed cookies help verify that cookies are **not tampered with**.
* You can then access them using:

```js
req.signedCookies
```

---

### 6. Without `cookieParser()`

If you don’t use this middleware,
and you log:

```js
console.log(req.headers.cookie)
```

you’ll get a single string like:

```
token=abc123; theme=dark
```

You would need to manually split it.
`cookieParser()` saves you from doing this.

---

### 7. Uses of Cookies

* User authentication (tokens, session IDs)
* Remembering user settings (theme, language)
* Tracking logged-in users
* Storing small pieces of client info

---

### 8. Comparison (with `express.json()`)

| Feature          | express.json() | cookieParser()         |
| ---------------- | -------------- | ---------------------- |
| Parses           | JSON body data | Cookies from headers   |
| Data location    | Request body   | Request headers        |
| Result stored in | req.body       | req.cookies            |
| Common use       | API data       | Auth, user preferences |

---

### 9. One-line summary

`cookieParser()` reads the Cookie header from the client’s request, parses it into a JavaScript object, and stores it in req.cookies for easy use in routes.

---

### Example to remember

```js
app.use(cookieParser())

app.get('/dashboard', (req, res) => {
  const token = req.cookies.token
  res.send(`Your token is ${token}`)
})
```

---

✅ **Remember:**

* Cookies are sent automatically by browsers with each request.
* `cookieParser()` helps Express understand them easily.

---