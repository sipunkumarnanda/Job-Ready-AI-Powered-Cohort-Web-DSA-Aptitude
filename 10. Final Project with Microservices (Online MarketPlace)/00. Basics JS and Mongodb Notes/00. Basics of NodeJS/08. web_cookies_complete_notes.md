
## ğŸª 1. What Are Web Cookies?

**Definition:**
A **web cookie** (or HTTP cookie) is a **small piece of data** that a website stores in your **browser**.
It helps websites:

* Remember **who you are** (session, login)
* Remember your **preferences** (language, theme)
* Keep track of your **activity** (pages visited, cart items)

Think of a cookie as a **tiny note** your browser carries and shows to the website each time you visit, so the site can say:

> â€œOh, I recognize this browser. This is the same user as before.â€

---

## ğŸŒ 2. Why Do Cookies Exist?

HTTP, the protocol used by browsers and servers, is **stateless**:

* Each request is **independent**
* The server does **not remember** previous requests

Without cookies:

* Every page would treat you like a **new visitor**
* Youâ€™d have to log in again on **every page**
* Shopping carts would **reset** with each click

ğŸ‘‰ Cookies solve this by giving the server a way to **associate multiple requests** with the same user/session.

---

## ğŸ§© 3. How Cookies Work (Step-by-Step Flow)

### ğŸ” Step 1: Server Sets a Cookie

You visit `example.com`.
The server responds with an HTTP header like:

```http
Set-Cookie: session_id=abc123xyz; Path=/; Expires=Wed, 19 Nov 2025 12:00:00 GMT; HttpOnly; Secure
```

Your **browser**:

* Reads this header
* Stores the cookie in its cookie storage

---

### ğŸ” Step 2: Browser Sends Cookie Back

Next time your browser requests something from `example.com`, it adds:

```http
Cookie: session_id=abc123xyz
```

The **server**:

* Reads `session_id=abc123xyz`
* Looks it up in its database
* Recognizes: â€œThis session belongs to user John, logged in already.â€

ğŸ‘‰ This is how websites **â€œrememberâ€ you across page loads**.

---

## ğŸ§± 4. Structure of a Cookie

A cookie is usually a **nameâ€“value pair**, with optional attributes.

### Basic format:

```text
name=value;
```

Example:

```text
session_id=abc123xyz
theme=dark
language=en
```

### Common attributes:

* `Expires` / `Max-Age` â€“ when the cookie should expire
* `Domain` â€“ which domain can use this cookie
* `Path` â€“ which URL path can send this cookie
* `Secure` â€“ only send via HTTPS
* `HttpOnly` â€“ not accessible via JavaScript
* `SameSite` â€“ controls cross-site sending (e.g. `Lax`, `Strict`, `None`)

---

## ğŸ›’ 5. What Are Cookies Used For?

### 5.1 Login & Sessions ğŸ”

* When you log in, the server creates a **session record** in its database (e.g., for user ID 42)
* It returns a cookie like:

```http
Set-Cookie: session_id=abc123xyz; HttpOnly; Secure;
```

* Browser sends `session_id` with each request
* Server checks:
  `session_id "abc123xyz" â†’ user 42 â†’ already logged in`

âœ… You **stay logged in** across pages
âŒ Without this, youâ€™d have to **authenticate on every new page**.

---

### 5.2 Preferences & Personalization ğŸ¨

Examples stored in cookies:

* `theme=dark`
* `fontSize=large`
* `language=en`

The website reads the cookie and:

* Sets language to English
* Shows dark mode
* Uses bigger fonts

ğŸ‘‰ This is how sites **remember your settings**.

---

### 5.3 Shopping Carts ğŸ›ï¸

On e-commerce sites:

* A cookie might store:

  * A session ID that maps to your cart on the server
    **or**
  * A small list of product IDs (encoded)

Result:

* Items **stay in your cart** even if:

  * You go to another page
  * You close and reopen the browser (if cookie is persistent)

---

### 5.4 Analytics & Tracking ğŸ“Š

Cookies help websites:

* Count unique visitors
* Track which pages you visit
* Measure time on site

Ad networks use **third-party cookies** to:

* Track you **across multiple sites**
* Build interest profiles
* Show **targeted ads**

This is where **privacy concerns** appear.

---

## ğŸ§® 6. Types of Cookies

### 6.1 By Duration â³

1. **Session Cookies**

   * No expiry date specified
   * Stored **only until the browser is closed**
   * Used for:

     * Temporary login sessions
     * One-time operations

2. **Persistent Cookies**

   * Have an `Expires` or `Max-Age` attribute
   * Stay on your device until:

     * They reach their expiry date
     * You manually delete them
   * Used for:

     * â€œRemember meâ€ logins
     * Long-term preferences

---

### 6.2 By Who Sets Them ğŸŒ

1. **First-Party Cookies**

   * Set by the **site you are directly visiting**

     * e.g., visiting `example.com`, cookie domain is `example.com`
   * Common uses:

     * Login
     * Preferences
     * Site features

2. **Third-Party Cookies**

   * Set by a **different domain** embedded in the page
     e.g., ads, social media widgets, analytics scripts
   * Example: You visit `news.com`, but an ad from `ads-tracker.com` sets a cookie.
   * Used for:

     * Cross-site tracking
     * Personalized advertising

ğŸ’¡ Many modern browsers are **restricting or phasing out** third-party cookies due to privacy concerns.

---

### 6.3 By Security Attributes ğŸ›¡ï¸

1. **Secure**

   * Cookie is **only** sent over **HTTPS** (encrypted)
   * Protects against attackers who might sniff traffic
   * Recommended for cookies that hold **sensitive info** (like session IDs)

2. **HttpOnly**

   * Makes the cookie **unreadable to JavaScript (`document.cookie`)**
   * Helps protect against **XSS attacks** stealing session cookies
   * Good practice for **session cookies**

3. **SameSite**

   * Controls whether cookies are sent on **cross-site requests**
   * Values:

     * `Strict` â€“ never sent in cross-site requests
     * `Lax` â€“ sent for top-level navigation (e.g., clicking a link)
     * `None` â€“ sent in all cross-site requests, but must be `Secure`
   * Helps defend against **CSRF attacks** and reduces **cross-site tracking**

---

## ğŸ’» 7. Cookies in HTTP and JavaScript

### 7.1 Server Side (HTTP Headers)

**Setting a cookie:**

```http
Set-Cookie: theme=dark; Expires=Wed, 19 Nov 2025 12:00:00 GMT; Path=/;
```

**Receiving a cookie:**

```http
Cookie: theme=dark; language=en;
```

The server parses this and uses the values to customize responses.

---

### 7.2 Client Side (JavaScript) âš™ï¸

You can manage cookies via `document.cookie` (for non-`HttpOnly` cookies):

**Set a cookie:**

```js
document.cookie = "theme=dark; path=/; max-age=31536000"; // 1 year
```

**Read cookies:**

```js
console.log(document.cookie); 
// e.g. "theme=dark; language=en"
```

**Delete a cookie:**

```js
document.cookie = "theme=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;";
```

âš ï¸ Note:

* `HttpOnly` cookies **cannot** be accessed via JavaScript (for security).

---

## ğŸ“¦ 8. Cookies vs Other Storage Options

Modern browsers also support:

### 8.1 `localStorage` ğŸ—ƒï¸

* Keyâ€“value storage in the browser
* Larger capacity than cookies (often ~5â€“10 MB)
* Data persists until manually cleared
* Not sent automatically to the server on each request

### 8.2 `sessionStorage` ğŸ—‚ï¸

* Similar to `localStorage`, but:

  * Data is cleared when the **tab** is closed
* Not shared across tabs

### 8.3 `IndexedDB` ğŸ—„ï¸

* A full database in the browser
* For complex, large, or structured data

**Key difference:**
ğŸ‘‰ Only **cookies** are automatically sent to the server with **every HTTP request**.
Other storages are only accessible via JavaScript.

---

## ğŸ•µï¸ 9. Security Issues Related to Cookies

### 9.1 XSS (Cross-Site Scripting) ğŸ˜ˆ

* If a site allows injection of malicious JavaScript:

  * That script can run in the userâ€™s browser
  * It can read cookies via `document.cookie` (unless `HttpOnly`)
  * It can send these cookies to an attacker

**Mitigation:**

* Use `HttpOnly` for session cookies
* Sanitize user input
* Use Content Security Policy (CSP)

---

### 9.2 Session Hijacking ğŸ§¨

If an attacker steals your session cookie:

* They can pretend to be **you**
* Use your account until the session expires or is invalidated

Mitigation:

* `Secure` cookies over HTTPS
* `HttpOnly` for session cookies
* Regenerate session IDs after login
* Short session expiry

---

### 9.3 CSRF (Cross-Site Request Forgery) ğŸ¯

Because cookies are sent automatically:

* A malicious site can trick your browser into making a request to another site where youâ€™re logged in (e.g., a bank)
* The browser includes cookies automatically
* The server might think **you** intentionally performed that action

Mitigation:

* `SameSite` cookies (`Lax` or `Strict`)
* Anti-CSRF tokens
* Double-submit cookie pattern

---

## ğŸ” 10. Privacy & Legal Aspects

Due to tracking and profiling:

* Laws like **GDPR**, **ePrivacy** (in EU) require:

  * Clear cookie notices
  * User consent for non-essential cookies (like ad tracking)
* Many sites show:

  * â€œThis site uses cookiesâ€ banners
  * Options:

    * Accept all
    * Customize / reject tracking cookies

Browsers also add tools:

* Blocking third-party cookies
* Tracking protection modes

---

## ğŸ” 11. Viewing & Managing Cookies (As a User)

You can **inspect** and **delete** cookies in the browserâ€™s developer tools:

1. Open **Developer Tools** (usually F12 or right-click â†’ Inspect)
2. Go to **Application / Storage / Privacy & Security** (depends on browser)
3. Look for **Cookies** under Storage
4. You can:

   * See cookie names, values, expiry, domain, path, flags (Secure, HttpOnly, SameSite)
   * Delete individual cookies or clear all cookies for the site

As a user, you can also:

* Clear cookies from browser **Settings â†’ Privacy**
* Use **private/incognito** mode to avoid storing persistent cookies

---

## âœ… 12. Summary (For Quick Revision)

* **Cookies = small data stored in your browser**, used by websites to remember info.
* They allow:

  * **Sessions & logins**
  * **Preferences** (language, theme)
  * **Shopping carts**
  * **Analytics & tracking**
* Types:

  * **Session vs Persistent**
  * **First-party vs Third-party**
  * Security flags: **Secure**, **HttpOnly**, **SameSite**
* Only cookies are:

  * **Automatically sent** with every HTTP request
* Security & privacy:

  * Vulnerable to XSS, CSRF, session hijacking if misused
  * Regulated by laws (GDPR, etc.)
  * Modern browsers and sites use flags and consent banners

---