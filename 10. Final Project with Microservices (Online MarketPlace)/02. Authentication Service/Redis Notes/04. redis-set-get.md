


# ğŸ“˜ Redis `set()` & `get()` â€” Step-by-Step with Examples

---

## ğŸ”° 1. Basic String Value

### âœ… SET Data

```js
await redis.set("name", "John");
```

### ğŸ” What Happens

* Key: `"name"`
* Value: `"John"`
* Stored in Redis memory

Redis now has:

```txt
name â†’ "John"
```

---

### âœ… GET Data

```js
const name = await redis.get("name");
console.log(name);
```

### ğŸ“¤ Output

```txt
John
```

ğŸ“Œ **Key Point**

* `get()` always returns a **string**
* If key doesnâ€™t exist â†’ `null`

---

## ğŸ”° 2. Storing Data with Expiry (TTL)

---

### âœ… SET Data with TTL

```js
await redis.set("otp", "123456", "EX", 60);
```

### ğŸ” What Happens

* Key: `otp`
* Value: `123456`
* TTL: `60 seconds`
* Redis auto-deletes key after 60 seconds

Redis state:

```txt
otp â†’ "123456" (expires in 60s)
```

---

### âœ… GET Data

```js
const otp = await redis.get("otp");
```

### ğŸ“¤ Possible Outputs

```txt
123456   // if within 60 seconds
null     // if expired
```

ğŸ“Œ **Interview Tip**

> Redis automatically deletes expired keys.

---

## ğŸ”° 3. Storing JSON / Object Data

Redis only stores **strings**, so objects must be stringified.

---

### âœ… SET Object

```js
const user = { id: 1, name: "John" };
await redis.set("user:1", JSON.stringify(user));
```

### ğŸ” What Happens

* Object converted to JSON string
* Stored in Redis as text

Redis:

```txt
user:1 â†’ '{"id":1,"name":"John"}'
```

---

### âœ… GET Object

```js
const cachedUser = await redis.get("user:1");
const userData = JSON.parse(cachedUser);
```

### ğŸ“¤ Output

```js
{ id: 1, name: "John" }
```

ğŸ“Œ **Important**

* Always `JSON.parse()` after `get()`
* Forgetting this is a common mistake âŒ

---

## ğŸ”° 4. Cache API Response (Real Project Example)

---

### âœ… SET Cached Response

```js
const users = await User.find();

await redis.set(
  "users",
  JSON.stringify(users),
  "EX",
  60
);
```

### ğŸ” What Happens

* API response stored in Redis
* Valid for 60 seconds
* DB load reduced

---

### âœ… GET Cached Response

```js
const cachedUsers = await redis.get("users");

if (cachedUsers) {
  return res.json(JSON.parse(cachedUsers));
}
```

### ğŸ“¤ Behavior

* First request â†’ DB
* Next requests â†’ Redis âš¡

ğŸ“Œ **Interview Line**

> Redis is commonly used to cache API responses.

---

## ğŸ”° 5. JWT Blacklist (Your Logout Case)

---

### âœ… SET Blacklisted Token

```js
await redis.set(
  `blacklist:${token}`,
  "true",
  "EX",
  24 * 60 * 60
);
```

### ğŸ” What Happens

* Token stored as key
* Value doesnâ€™t matter (`true`)
* TTL = 1 day
* Token auto-removed later

Redis:

```txt
blacklist:<JWT_TOKEN> â†’ "true"
```

---

### âœ… GET Blacklisted Token

```js
const isBlacklisted = await redis.get(`blacklist:${token}`);
```

### ğŸ“¤ Result

```txt
"true"   // token invalid
null     // token valid
```

ğŸ“Œ **Logic Used**

```js
if (isBlacklisted) {
  // deny access
}
```

---

## ğŸ”° 6. Using `NX` (Set Only If Not Exists)

---

### âœ… SET (Lock Example)

```js
await redis.set("lock:user:1", "true", "NX", "EX", 30);
```

### ğŸ” What Happens

* Creates lock only once
* Prevents duplicate processing
* Auto expires in 30s

---

### âœ… GET Lock

```js
const lock = await redis.get("lock:user:1");
```

### ğŸ“¤ Output

```txt
true   // lock exists
null   // lock expired
```

---

## ğŸ”° 7. Handling Missing Keys

---

### âœ… GET Non-Existing Key

```js
const data = await redis.get("unknown:key");
```

### ğŸ“¤ Output

```txt
null
```

ğŸ“Œ **Best Practice**

```js
if (!data) {
  // fetch from DB or handle fallback
}
```

---

## ğŸ§  Summary Table

| Scenario      | SET                             | GET                 |
| ------------- | ------------------------------- | ------------------- |
| Simple value  | `set(key, value)`               | `get(key)`          |
| With TTL      | `set(key, value, EX, sec)`      | `get(key)`          |
| Object        | `set(key, JSON.stringify(obj))` | `JSON.parse(get())` |
| Cache         | `set(key, data, EX)`            | `get(key)`          |
| JWT blacklist | `set(key, true, EX)`            | `get(key)`          |
| Lock          | `set(key, value, NX)`           | `get(key)`          |

---

## ğŸ¯ Interview-Ready One-Liners

* **`redis.set()`** â†’ Stores data with optional expiry & conditions
* **`redis.get()`** â†’ Fetches data or returns `null`
* Redis only stores **strings**
* TTL prevents memory leaks
* Redis is best for **cache, tokens, sessions**

---

## ğŸ Final Summary ğŸŒŸ

âœ”ï¸ Always **SET first**, then **GET**
âœ”ï¸ Use TTL for temporary data
âœ”ï¸ Convert objects using JSON
âœ”ï¸ Redis + JWT = secure logout
âœ”ï¸ Redis improves performance drastically

---