


# ğŸ†” `findById()` in **Mongoose** â€“ Complete Notes

---

## ğŸ§  What is `findById()`?

`findById()` is a **Mongoose method** used to **find a single document by its `_id` field**.

ğŸ“Œ It is **NOT a native MongoDB method**
ğŸ“Œ It is a **shortcut method provided by Mongoose**

---

## ğŸ“˜ Definition

> **`findById()` finds and returns one document whose `_id` matches the given value.**

---

## ğŸ”— Relation with **MongoDB**

Internally, `findById()` works like this ğŸ‘‡

```js
findOne({ _id: id })
```

So basically:
ğŸ‘‰ `findById()` = `findOne()` with `_id`

---

## ğŸ› ï¸ Syntax

### âœ… Basic Syntax

```js
Model.findById(id)
```

### âœ… With Async/Await

```js
const user = await User.findById(id);
```

### âœ… With Callback (Old Style)

```js
User.findById(id, function(err, user) {
  console.log(user);
});
```

---

## ğŸ§© Parameters

### 1ï¸âƒ£ `id`

* Must be a valid **MongoDB ObjectId**
* Can be:

  * String `"64c2..."`
  * ObjectId type

ğŸ“Œ No filter object allowed here âŒ

---

## ğŸ” Return Value

### ğŸ“¤ What does `findById()` return?

| Case             | Return  |
| ---------------- | ------- |
| Document found   | Object  |
| No document      | `null`  |
| Invalid ObjectId | Error âŒ |

ğŸ“Œ Returns **ONLY ONE document**, never an array

---

## ğŸ§ª Examples (Very Important ğŸ‘‡)

---

### ğŸ“˜ Example 1: Basic usage

```js
const user = await User.findById("64c2f9e12ab34c...");
```

ğŸŸ¢ Returns:

```js
{
  _id: "64c2f9e12ab34c...",
  name: "Rahul",
  email: "rahul@gmail.com"
}
```

---

### ğŸ“˜ Example 2: Using Request Params (Express)

```js
app.get("/user/:id", async (req, res) => {
  const user = await User.findById(req.params.id);
  res.json(user);
});
```

---

### ğŸ“˜ Example 3: Selecting specific fields

```js
User.findById(id).select("name email");
```

---

### ğŸ“˜ Example 4: Handling not found case

```js
const user = await User.findById(id);

if (!user) {
  console.log("User not found");
}
```

---

## ğŸš« What You CANNOT Do with `findById()`

âŒ Cannot use logical operators
âŒ Cannot use filters like `$or`, `$and`
âŒ Cannot query other fields

```js
// âŒ WRONG
User.findById({ name: "Rahul" });
```

---

## âš–ï¸ `findById()` vs `findOne()`

| Feature     | `findById()` ğŸ†” | `findOne()` ğŸ” |
| ----------- | --------------- | -------------- |
| Query Field | `_id` only      | Any field      |
| Filters     | âŒ Not allowed   | âœ… Allowed      |
| Use Case    | Fetch by ID     | Flexible       |
| Simplicity  | Very simple     | More control   |

---

## â° When to Use `findById()`?

âœ… Fetch user by ID
âœ… Get product by ID
âœ… View profile, details page
âœ… REST APIs (`GET /users/:id`)

---

## ğŸš« When NOT to Use?

âŒ When querying by email, username
âŒ When multiple conditions are needed
âŒ When using `$or`, `$and`

ğŸ‘‰ Use `findOne()` or `find()` instead

---

## âš ï¸ Important Notes

ğŸ”¹ Automatically casts string to ObjectId
ğŸ”¹ Throws error if ID format is invalid
ğŸ”¹ Faster & cleaner than `findOne({ _id })`
ğŸ”¹ Works with `.populate()`

---

## ğŸ§  Interview Quick Points ğŸ¯

âœ… `findById()` is a **Mongoose method**
âœ… Internally uses `findOne({ _id })`
âœ… Returns **object or null**
âœ… Cannot use logical operators

---

## âœ¨ Summary

âœ” `findById()` fetches **one document by `_id`**
âœ” Cleaner and safer for ID-based queries
âœ” Commonly used in REST APIs
âœ” Mongoose-specific method

---