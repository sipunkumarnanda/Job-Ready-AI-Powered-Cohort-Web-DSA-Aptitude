

# ğŸ“˜ Mongoose User Model â€“ Detailed Notes



```js


const mongoose = require('mongoose')

const addressSchema = new mongoose.Schema({
    street : String,
    city : String,
    state : String,
    pincode : String,
    country : String,
    phone : String,
    isDefault : { type : Boolean, default : false }
})


const userSchema = new mongoose.Schema({
    username : {
        type  : String,
        required : true,
        unique : true
    },
    email : {
        type : String,
        required : true,
        unique : true
    },
    password : {
        type : String,
        select : false
    },
    fullName : {
        firstName : {
            type : String,
            required : true
        },
        lastName : {
             type : String,
            required : true
        }
    },
    role : {
        type : String,
        enum : ["user", "seller"],
        default : "user"
    },
    addresses : [ addressSchema ]
})


const userModel = mongoose.model("user", userSchema)


module.exports = userModel

```



---

## ğŸ”¹ 1. Importing Mongoose

```js
const mongoose = require('mongoose')
```

* Imports **Mongoose**, an ODM (Object Data Modeling) library.
* Helps define **schemas**, **models**, and interact with MongoDB using JavaScript objects.

---

## ğŸ”¹ 2. Address Schema (Subdocument Schema)

```js
const addressSchema = new mongoose.Schema({
    street : String,
    city : String,
    state : String,
    pincode : String,
    country : String,
    phone : String,
    isDefault : { type : Boolean, default : false }
})
```

### ğŸ“Œ Purpose

* Represents **user addresses**
* Used as a **nested (embedded) document** inside the user schema

### ğŸ§© Field Explanation

| Field       | Type    | Description                |
| ----------- | ------- | -------------------------- |
| `street`    | String  | Street name / house number |
| `city`      | String  | City name                  |
| `state`     | String  | State or province          |
| `pincode`   | String  | Postal / ZIP code          |
| `country`   | String  | Country name               |
| `phone`     | String  | Contact number             |
| `isDefault` | Boolean | Marks default address      |

### â­ Key Points

* `isDefault` defaults to `false`
* This schema **does not create a separate collection**
* Stored **inside the user document**

---

## ğŸ”¹ 3. User Schema (Main Schema)

```js
const userSchema = new mongoose.Schema({
```

Defines the structure of a **User document** in MongoDB.

---

## ğŸ”¸ 3.1 Username Field ğŸ‘¤

```js
username : {
    type  : String,
    required : true,
    unique : true
}
```

### âœ… Highlights

* Must be **unique**
* **Required** field
* MongoDB enforces uniqueness using an **index**

---

## ğŸ”¸ 3.2 Email Field ğŸ“§

```js
email : {
    type : String,
    required : true,
    unique : true
}
```

### âœ… Highlights

* Required and unique
* Ideal for **authentication & verification**
* Should be validated further (regex) in production

---

## ğŸ”¸ 3.3 Password Field ğŸ”

```js
password : {
    type : String,
    select : false
}
```

### ğŸ”’ Security Feature

* `select: false` means:

  * Password **will NOT appear in queries by default**
  * Must be explicitly requested using `.select('+password')`

âœ”ï¸ Best practice for **security**

---

## ğŸ”¸ 3.4 Full Name (Nested Object) ğŸ§¾

```js
fullName : {
    firstName : {
        type : String,
        required : true
    },
    lastName : {
        type : String,
        required : true
    }
}
```

### ğŸ§  Why Nested?

* Groups related data logically
* Makes queries more structured

### ğŸ“Œ Both fields are:

* Required
* Stored as an embedded object

---

## ğŸ”¸ 3.5 Role Field ğŸ­

```js
role : {
    type : String,
    enum : ["user", "seller"],
    default : "user"
}
```

### ğŸ¯ Purpose

* Defines **authorization level**

### ğŸš¦ Enum Explanation

* Restricts role values to:

  * `"user"`
  * `"seller"`

### â­ Default

* If not specified â†’ role = `"user"`

---

## ğŸ”¸ 3.6 Addresses Field ğŸ 

```js
addresses : [ addressSchema ]
```

### ğŸ“¦ What This Means

* Array of **address subdocuments**
* One user can have **multiple addresses**

### ğŸ”¥ Benefits

* Fast access (embedded documents)
* Ideal for user-related data

---

## ğŸ”¹ 4. Creating the Model ğŸ—ï¸

```js
const userModel = mongoose.model("user", userSchema)
```

### ğŸ“Œ Explanation

* Converts schema into a **model**
* `"user"` becomes the MongoDB collection name â†’ **users**

---

## ğŸ”¹ 5. Exporting the Model ğŸ“¤

```js
module.exports = userModel
```

### âœ… Purpose

* Allows usage in:

  * Controllers
  * Routes
  * Services

---

## ğŸ§  Professional Observations ğŸ’¡

âœ”ï¸ **Good Practices Used**

* Password hidden using `select:false`
* Role-based access via `enum`
* Embedded schema for addresses

âš ï¸ **Improvements You Can Add**

* Email validation (regex)
* Password hashing (bcrypt)
* Timestamps (`{ timestamps: true }`)
* Address default validation (only one `isDefault: true`)

---

## ğŸ Final Summary ğŸŒŸ

This Mongoose model:

* Represents a **secure and scalable user structure**
* Uses **nested schemas**, **field validation**, and **security best practices**
* Is well-suited for **e-commerce or multi-role applications**

---