
# 🔌 What is the `connection` event in Socket.IO?

The **`connection` event** is the very first event that gets fired on the **server** side whenever a new client successfully establishes a connection with the Socket.IO server.

---

### 🌟 Why is it important?

* It signals that a **new client (user)** has connected.
* It provides a unique **`socket` object** representing that particular client’s connection.
* You use it to set up event listeners for that client and send messages directly to them.

---

### ⚡ When does the `connection` event fire?

* The moment a client (usually a browser or another Socket.IO client) **connects to the server** via WebSocket or fallback transports.
* Happens **once per client connection** — every time a user refreshes or reconnects, this event fires again.
* It’s like a handshake acknowledgment that the server and client are now “talking.”

---

### 📋 What happens inside the `connection` event?

When the event fires, the server:

* Gets a **`socket` object** which represents the newly connected client.
* Can listen for custom events from this client via `socket.on(...)`.
* Can send data/events back to this client via `socket.emit(...)`.
* Can also broadcast messages to other clients if needed.

---

### 📝 Example: Basic connection event

```js
const io = require('socket.io')(3000);

io.on('connection', (socket) => {
  console.log('A new user connected:', socket.id);

  // Send a welcome message to the connected client
  socket.emit('welcome', 'Hello! Welcome to the server.');

  // Listen for a 'chat message' from this client
  socket.on('chat message', (msg) => {
    console.log('Message received:', msg);

    // Broadcast to all clients including sender
    io.emit('chat message', msg);
  });

  // Handle client disconnect
  socket.on('disconnect', () => {
    console.log('User disconnected:', socket.id);
  });
});
```

---

### 🔍 Key points:

| Aspect                | Description                         | Emoji |
| --------------------- | ----------------------------------- | ----- |
| Event name            | `'connection'`                      | 🔌    |
| Trigger time          | When client connects to the server  | ⏱️    |
| Provides              | `socket` object (client connection) | 🧩    |
| Used for              | Setup event handlers for client     | ⚙️    |
| Fires multiple times? | Yes, once per client connection     | 🔄    |

---

### 🤝 Client connection process:

1. Client calls `io()` or `io.connect()` to establish connection.
2. Server detects connection, fires `'connection'` event.
3. Server receives a new `socket` object for that client.
4. Server and client start exchanging events/messages.

---

### 🌟 Summary:

The **`connection` event** is the **gateway** to every client interaction in Socket.IO. It fires **once for each client** connecting to the server, giving you the chance to communicate with that client specifically or broadcast messages.

---