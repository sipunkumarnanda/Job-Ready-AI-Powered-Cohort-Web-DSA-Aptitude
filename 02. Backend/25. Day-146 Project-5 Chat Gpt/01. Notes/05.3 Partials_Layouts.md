
# 🌟 Partials & Layouts in EJS (with `res.render()`)

---

## 🟢 1. What are Partials in EJS?

* **Partials = small reusable template files 🧩**

* They contain repeating pieces of UI like:

  * 🧭 Navbar
  * 📝 Footer
  * 📌 Sidebar

* Instead of writing the same HTML again and again in every `.ejs` file, you write it **once in a partial** and **include it everywhere**.

👉 Saves **time**, avoids **duplicate code**, and keeps design **consistent**.

---

## 🟢 2. Creating a Partial

Let’s create a **navbar partial**.

📁 Project structure:

```
views/
 ├── partials/
 │    └── navbar.ejs
 ├── home.ejs
 ├── about.ejs
 └── contact.ejs
```

### 🖼 `views/partials/navbar.ejs`

```html
<nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="/contact">Contact</a></li>
  </ul>
</nav>
```

---

## 🟢 3. Using a Partial in a Page

### 🖼 `views/home.ejs`

```html
<!DOCTYPE html>
<html>
<head>
  <title>Home</title>
</head>
<body>
  <!-- Include Navbar Partial -->
  <%- include("partials/navbar") %>  

  <h1>Welcome to Home Page 🎉</h1>
</body>
</html>
```

### 🖼 `views/about.ejs`

```html
<!DOCTYPE html>
<html>
<head>
  <title>About</title>
</head>
<body>
  <%- include("partials/navbar") %>  

  <h1>About Us 📖</h1>
</body>
</html>
```

👉 Now, if you want to change a menu link, you only edit `navbar.ejs` ✅.
All pages update automatically 🚀.

---

## 🟢 4. What about Layouts?

Layouts are like **master templates 🏠**.
They hold the **basic page structure** (HTML boilerplate) and allow content to be inserted inside.

📁 Example Structure:

```
views/
 ├── layout.ejs
 ├── partials/
 │    ├── navbar.ejs
 │    └── footer.ejs
 ├── home.ejs
 └── about.ejs
```

---

## 🟢 5. Building a Layout

### 🖼 `views/layout.ejs`

```html
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
</head>
<body>
  <%- include("partials/navbar") %>

  <!-- Page Content Goes Here -->
  <main>
    <%- body %>
  </main>

  <%- include("partials/footer") %>
</body>
</html>
```

---

## 🟢 6. Rendering Pages with Layouts

To use layouts easily, install **express-ejs-layouts** (a middleware).

📦 Install:

```bash
npm install express-ejs-layouts
```

⚙️ In `app.js`:

```js
import express from "express";
import expressLayouts from "express-ejs-layouts";

const app = express();

app.set("view engine", "ejs");
app.use(expressLayouts); // enable layouts
```

Now your routes can render with layouts:

```js
router.get("/", (req, res) => {
  res.render("home", { title: "Home Page", layout: "layout" });
});

router.get("/about", (req, res) => {
  res.render("about", { title: "About Page", layout: "layout" });
});
```

---

## 🟢 7. Example of a Page with Layout

### 🖼 `views/home.ejs`

```html
<h1>Welcome to the Home Page 🎉</h1>
<p>This is where the fun begins!</p>
```

### 🖼 `views/about.ejs`

```html
<h1>About Us 📖</h1>
<p>We are awesome developers 😎</p>
```

💡 These pages don’t need full HTML — only the unique content.
The **layout handles boilerplate** (doctype, head, navbar, footer).

---

## 🟢 8. Final Flow of `res.render()` with Layouts

1. Client requests `/`.
2. Route calls `res.render("home", { layout: "layout" })`.
3. Express-EJS-Layouts merges:

   * `layout.ejs` → main wrapper.
   * `home.ejs` → inserted into `<%- body %>`.
4. Navbar + Footer partials also get included.
5. Final HTML is sent to browser.

---

# 🌐 Final Cheat-Sheet (with Emojis)

* 🧩 **Partials** → reusable snippets (`navbar.ejs`, `footer.ejs`).
* 🏠 **Layouts** → master template wrapping all pages.
* ⚡ `express-ejs-layouts` → middleware to use layouts.
* 🔄 `res.render("view", { layout: "layout" })` → combine layout + page.
* 🎨 Benefit → clean, DRY code, easy maintenance.

---