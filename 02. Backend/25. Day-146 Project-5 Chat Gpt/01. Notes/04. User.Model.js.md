
# **Models layer** of your app (the “M” in MVC). Let’s break down `src/models/user.model.js` 

Here’s your file again:

```js
import mongoose from "mongoose";

const userSchema = new mongoose.Schema(
  {
    username: {
      type: String,
      required: true,
      unique: true,
    },
    email: {
      type: String,
      required: true,
      unique: true,
    },
    password: {
      type: String,
      required: true,
    },
  },
  {
    timestamps: true,
  }
);

const userModel = mongoose.model("user", userSchema);

export default userModel
```

---

# 🌟 `user.model.js` Explained Step by Step (with Emojis)

---

## 🟢 1. `import mongoose from "mongoose";`

* **What it does:**
  Brings in **Mongoose** again, which is our ODM (Object Data Modeling) library for MongoDB.

* **Why needed:**

  * We use Mongoose to define schemas and models.
  * Models help us read/write to MongoDB in a structured way.

* **In simple words:**
  Think of Mongoose as a **bridge 🌉** between your JavaScript code and MongoDB collections.

---

## 🟢 2. `const userSchema = new mongoose.Schema({ ... })`

* **What it does:**
  Defines the **blueprint** 🧾 (structure) of how a `User` document should look inside MongoDB.

* **Each field inside schema = rules for the data**:

  * `username`: must be a `String`, required ✅, unique 🆔.
  * `email`: must be a `String`, required ✅, unique 🆔.
  * `password`: must be a `String`, required ✅.

* **Options object `{ timestamps: true }`:**

  * Automatically adds `createdAt` and `updatedAt` fields to each document.
  * Example:

    ```json
    {
      "username": "alex",
      "email": "alex@mail.com",
      "password": "hashedpw",
      "createdAt": "2025-08-17T12:00:00Z",
      "updatedAt": "2025-08-17T12:10:00Z"
    }
    ```

* **In simple words:**
  Schema = **recipe 📖** for baking cookies 🍪. You say “every cookie must have flour, sugar, butter…” → in MongoDB terms, every User must have username, email, password.

---

## 🟢 3. Field Properties Explained (with Emojis)

Inside schema:

```js
username: {
  type: String,      // 🔠 must be text
  required: true,    // ✅ cannot be empty
  unique: true,      // 🆔 no duplicates allowed
}
```

* `type`: What kind of data (String, Number, Boolean, Date, ObjectId).
* `required: true`: Cannot save document without this field.
* `unique: true`: MongoDB ensures no two documents have the same value for this field (like primary key).

➡️ These rules make sure your **data stays clean 🧹** and prevents duplicate users.

---

## 🟢 4. `const userModel = mongoose.model("user", userSchema);`

* **What it does:**
  Creates a **Model** named `"user"` based on the `userSchema`.

* **How it works:**

  * `"user"` → MongoDB collection will be `"users"` (Mongoose automatically pluralizes model name).
  * Now you can use `userModel` to perform CRUD operations (Create, Read, Update, Delete).

* **Example usage:**

  ```js
  import userModel from "./models/user.model.js";

  // Create a new user
  const newUser = await userModel.create({
    username: "alex",
    email: "alex@mail.com",
    password: "hashedpassword123"
  });

  // Find a user
  const user = await userModel.findOne({ email: "alex@mail.com" });

  // Update a user
  await userModel.updateOne({ email: "alex@mail.com" }, { username: "alexander" });

  // Delete a user
  await userModel.deleteOne({ email: "alex@mail.com" });
  ```

* **In simple words:**
  A Model is like a **kitchen 👩‍🍳** that knows how to bake cookies based on your recipe (schema). You order cookies by saying: “Bake one with chocolate chips 🍫” (find/create/update/delete), and the kitchen knows exactly how to do it.

---

## 🟢 5. `export default userModel`

* **What it does:**
  Makes the `userModel` available everywhere in your project.

* **Example usage:**
  In `auth.routes.js` you might write:

  ```js
  import userModel from "../models/user.model.js";

  router.post("/register", async (req, res) => {
    const user = await userModel.create(req.body);
    res.json(user);
  });
  ```

* **In simple words:**
  This is like **sharing the recipe 📝 with the whole restaurant** so every department (auth, admin, profile) can use the User model.

---

# 🧩 Putting It Together (Lifecycle of a User)

1. A client sends a request: `/auth/register` with `username`, `email`, `password`.
2. Router receives it.
3. Router calls `userModel.create(...)`.
4. Mongoose checks `userSchema` rules ✅.
5. If valid → saves to MongoDB inside the `users` collection.
6. MongoDB stores the document and returns it.
7. Server responds back to client with success 🎉.

---

# 🌐 Final Cheat-Sheet (with Emojis)

* 🧾 `mongoose.Schema` → Define a **blueprint** (rules for documents).
* 🔠 `type` → What kind of data (String, Number, Boolean, etc.).
* ✅ `required: true` → Must always have a value.
* 🆔 `unique: true` → No duplicates allowed.
* ⏰ `timestamps: true` → Auto add `createdAt` + `updatedAt`.
* 👩‍🍳 `mongoose.model("user", schema)` → Creates the **kitchen** (Model) to cook/bake documents.
* 📡 `export default userModel` → Share model to use across app.

---