
# ğŸ“„ Code: `service/ai.service.js`

```js
import dotenv from 'dotenv'
import { GoogleGenAI } from "@google/genai";

dotenv.config()

// The client gets the API key from the environment variable `GEMINI_API_KEY`.
const ai = new GoogleGenAI({
  apiKey : process.env.GEMINI_APIKEY
});

async function askAi(prompt) {
  const response = await ai.models.generateContent({
    model: "gemini-2.0-flash",
    contents: prompt,
  });
  return response.text
}

export default askAi
```

---

# ğŸ“ Explanation with Notes

---

## 1. Importing Required Modules

```js
import dotenv from 'dotenv'
import { GoogleGenAI } from "@google/genai";
```

* âš™ï¸ **dotenv** â†’ Used to load environment variables from `.env` file into `process.env`.
* ğŸ¤– **GoogleGenAI** â†’ Official Google client library for interacting with **Gemini AI models**.

---

## 2. Loading Environment Variables

```js
dotenv.config()
```

* ğŸŒ Loads `.env` file so you can securely access `GEMINI_APIKEY`.
* ğŸ”’ Keeps API keys secret instead of hardcoding them into the code.

---

## 3. Initializing the AI Client

```js
const ai = new GoogleGenAI({
  apiKey : process.env.GEMINI_APIKEY
});
```

* ğŸ”‘ Creates a new **GoogleGenAI client** using the API key stored in environment variable `GEMINI_APIKEY`.
* ğŸ“Œ This client will be used to send requests to **Gemini models**.

---

## 4. Defining the `askAi` Function

```js
async function askAi(prompt) {
```

* âš¡ Declares an **asynchronous function** named `askAi`.
* âœï¸ Accepts a parameter `prompt` â†’ this is the **user input/question** to send to the AI model.

---

## 5. Sending a Request to the AI Model

```js
  const response = await ai.models.generateContent({
    model: "gemini-2.0-flash",
    contents: prompt,
  });
```

* ğŸš€ Calls `ai.models.generateContent()` to generate AI responses.
* ğŸ” **Parameters**:

  * `model` â†’ `"gemini-2.0-flash"` (a fast, lightweight Gemini model).
  * `contents` â†’ the `prompt` text provided by the user.
* â³ Uses `await` â†’ waits for the AI to respond before moving on.

---

## 6. Returning the AIâ€™s Response

```js
  return response.text
```

* ğŸ“ Extracts the **text output** from the AI response.
* ğŸ“¤ Sends back only the useful text instead of the full JSON response object.

---

## 7. Exporting the Function

```js
export default askAi
```

* ğŸ“¦ Exports the `askAi` function as the default export.
* ğŸ”§ Can be imported anywhere in the project like:

```js
import askAi from './service/ai.service.js'

const reply = await askAi("Tell me a joke");
console.log(reply);
```

---

# ğŸŒŸ Summary

The `ai.service.js` does the following:

1. âš™ï¸ Loads environment variables with **dotenv**.
2. ğŸ”‘ Creates a `GoogleGenAI` client with the API key from `.env`.
3. âœï¸ Defines an **`askAi` function** that:

   * Sends a `prompt` to the **Gemini model** (`gemini-2.0-flash`).
   * Waits for the response.
   * Returns the **AI-generated text**.
4. ğŸ“¦ Exports `askAi` so it can be used in other parts of the app.

---