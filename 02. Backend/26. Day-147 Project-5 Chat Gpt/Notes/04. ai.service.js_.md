
# 📄 Code: `service/ai.service.js`

```js
import dotenv from 'dotenv'
import { GoogleGenAI } from "@google/genai";

dotenv.config()

// The client gets the API key from the environment variable `GEMINI_API_KEY`.
const ai = new GoogleGenAI({
  apiKey : process.env.GEMINI_APIKEY
});

async function askAi(prompt) {
  const response = await ai.models.generateContent({
    model: "gemini-2.0-flash",
    contents: prompt,
  });
  return response.text
}

export default askAi
```

---

# 📝 Explanation with Notes

---

## 1. Importing Required Modules

```js
import dotenv from 'dotenv'
import { GoogleGenAI } from "@google/genai";
```

* ⚙️ **dotenv** → Used to load environment variables from `.env` file into `process.env`.
* 🤖 **GoogleGenAI** → Official Google client library for interacting with **Gemini AI models**.

---

## 2. Loading Environment Variables

```js
dotenv.config()
```

* 🌍 Loads `.env` file so you can securely access `GEMINI_APIKEY`.
* 🔒 Keeps API keys secret instead of hardcoding them into the code.

---

## 3. Initializing the AI Client

```js
const ai = new GoogleGenAI({
  apiKey : process.env.GEMINI_APIKEY
});
```

* 🔑 Creates a new **GoogleGenAI client** using the API key stored in environment variable `GEMINI_APIKEY`.
* 📌 This client will be used to send requests to **Gemini models**.

---

## 4. Defining the `askAi` Function

```js
async function askAi(prompt) {
```

* ⚡ Declares an **asynchronous function** named `askAi`.
* ✍️ Accepts a parameter `prompt` → this is the **user input/question** to send to the AI model.

---

## 5. Sending a Request to the AI Model

```js
  const response = await ai.models.generateContent({
    model: "gemini-2.0-flash",
    contents: prompt,
  });
```

* 🚀 Calls `ai.models.generateContent()` to generate AI responses.
* 🔎 **Parameters**:

  * `model` → `"gemini-2.0-flash"` (a fast, lightweight Gemini model).
  * `contents` → the `prompt` text provided by the user.
* ⏳ Uses `await` → waits for the AI to respond before moving on.

---

## 6. Returning the AI’s Response

```js
  return response.text
```

* 📝 Extracts the **text output** from the AI response.
* 📤 Sends back only the useful text instead of the full JSON response object.

---

## 7. Exporting the Function

```js
export default askAi
```

* 📦 Exports the `askAi` function as the default export.
* 🔧 Can be imported anywhere in the project like:

```js
import askAi from './service/ai.service.js'

const reply = await askAi("Tell me a joke");
console.log(reply);
```

---

# 🌟 Summary

The `ai.service.js` does the following:

1. ⚙️ Loads environment variables with **dotenv**.
2. 🔑 Creates a `GoogleGenAI` client with the API key from `.env`.
3. ✍️ Defines an **`askAi` function** that:

   * Sends a `prompt` to the **Gemini model** (`gemini-2.0-flash`).
   * Waits for the response.
   * Returns the **AI-generated text**.
4. 📦 Exports `askAi` so it can be used in other parts of the app.

---