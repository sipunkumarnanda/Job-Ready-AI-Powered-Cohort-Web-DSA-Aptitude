
# **WebSocket lifecycle diagram** showing the entire flow from handshake to closing the connection.

---

```
💻 Client                              🖥️ Server
   │                                      │
   │ 1️⃣ HTTP GET + Upgrade: websocket 🆙 │
   │─────────────────────────────────────▶│
   │                                      │
   │          2️⃣ 101 Switching Protocols ✅│
   │◀─────────────────────────────────────│
   │                                      │
   │        🔌 WebSocket connection open  │
   │──────────────────────────────────────│
   │                                      │
   │ 3️⃣ Send message 📨                   │
   │─────────────────────────────────────▶│
   │                                      │
   │ 4️⃣ Receive message 📩                │
   │◀─────────────────────────────────────│
   │                                      │
   │ 5️⃣ Ping 🏓                           │
   │─────────────────────────────────────▶│
   │                                      │
   │ 6️⃣ Pong 🏓                           │
   │◀─────────────────────────────────────│
   │                                      │
   │ 7️⃣ Server sends update 🔔            │
   │◀─────────────────────────────────────│
   │                                      │
   │ 8️⃣ Close ❌                          │
   │─────────────────────────────────────▶│
   │                                      │
   │ 9️⃣ Close ACK ❌                      │
   │◀─────────────────────────────────────│
   │                                      │
   │      🔒 TCP connection closed        │
   │                                      │
```

---

### **Legend**

* **1️⃣–2️⃣** → **Handshake phase** 🤝 — Start as HTTP, switch to WebSocket.
* **3️⃣–4️⃣** → **Messaging phase** 💬 — Both sides can send text or binary frames anytime.
* **5️⃣–6️⃣** → **Heartbeat phase** ❤️ — Ping/Pong keeps the connection alive and detects timeouts.
* **7️⃣** → **Server push** 📡 — Server can send updates without waiting for a client request.
* **8️⃣–9️⃣** → **Closing phase** 🚪 — Exchange Close frames, then shut down TCP.

---