
# ğŸŒ EJS Escaped vs Unescaped Output Explained with Example âœ¨

In this example, we are using **EJS** to render **both escaped (`<%= %>`) and unescaped (`<%- %>`) HTML** from a Node.js/Express server. Letâ€™s break it down step by step.

---

## 1ï¸âƒ£ **Server Setup (`server.js`)** ğŸ–¥ï¸

```js
app.get('/mami', (req, res) => {
    res.render('unescapedOutput', {
        htmls: [
            `<h1>Hello world</h1>`,
            `<h2>This is a simple html snippet</h2>`,
            `<p>This is a paragraph</p>`,
            `<button>click me</button>`
        ]
    });
});
```

**Explanation:**

* Route `/mami` renders the **`unescapedOutput.ejs`** template.
* Sends an array `htmls` containing **HTML snippets**.
* We will display these snippets **escaped** and **unescaped** in EJS.

---

## 2ï¸âƒ£ **EJS Template (`views/unescapedOutput.ejs`)** ğŸ“„

```ejs
<h1>Hello from unescaped output ejs</h1>

<!-- Escaped output -->
<% htmls.forEach(html => { %>
    <%= html %>
<% }) %>

<!-- Unescaped output -->
<% htmls.forEach(html => { %>
    <%- html %>
<% }) %>
```

**Explanation:**

1. **Escaped Output `<%= html %>`**

   * Converts HTML tags into **escaped characters** (`<` â†’ `&lt;`, `>` â†’ `&gt;`)
   * Browser renders **as text**, not HTML

2. **Unescaped Output `<%- html %>`**

   * Outputs HTML **as-is**
   * Browser renders **actual HTML elements**

---

## 3ï¸âƒ£ **What Happens in the Browser** ğŸŒ

### a) **Escaped Output Section**

Rendered as **text**:

```
<h1>Hello world</h1>
<h2>This is a simple html snippet</h2>
<p>This is a paragraph</p>
<button>click me</button>
```

* The tags are visible as plain text.
* Safe if content is **untrusted**.

### b) **Unescaped Output Section**

Rendered as **actual HTML**:

* `<h1>Hello world</h1>` â†’ displays **Hello world** as a large heading
* `<h2>This is a simple html snippet</h2>` â†’ displays smaller heading
* `<p>This is a paragraph</p>` â†’ displays paragraph text
* `<button>click me</button>` â†’ displays a clickable button

**Visual Output Example:**

**Escaped:**

```
<h1>Hello world</h1>
<h2>This is a simple html snippet</h2>
<p>This is a paragraph</p>
<button>click me</button>
```

**Unescaped:**

* Hello world  (big heading)
* This is a simple html snippet  (subheading)
* This is a paragraph
* \[click me]  (button element rendered)

---

## 4ï¸âƒ£ **Key Takeaways** âœ…

| EJS Tag  | Purpose                                  | Output              | When to Use                    |
| -------- | ---------------------------------------- | ------------------- | ------------------------------ |
| `<%= %>` | Escaped output (safe for untrusted HTML) | Shows HTML as text  | Display user input safely      |
| `<%- %>` | Raw/unescaped HTML                       | Renders actual HTML | Trusted/sanitized HTML content |

* **Escaped (`<%= %>`)** â†’ prevents XSS attacks
* **Unescaped (`<%- %>`)** â†’ renders full HTML, useful for dynamic templates

---

ğŸ’¡ **Emoji Summary:**

* ğŸ”’ `<%= %>` â†’ safe, text output
* ğŸŒŸ `<%- %>` â†’ actual HTML elements
* ğŸ–¥ï¸ Example demonstrates the difference visually in browser

---