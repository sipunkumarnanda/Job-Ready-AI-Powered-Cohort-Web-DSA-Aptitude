
# 🌐 EJS Escaped vs Unescaped Output Explained with Example ✨

In this example, we are using **EJS** to render **both escaped (`<%= %>`) and unescaped (`<%- %>`) HTML** from a Node.js/Express server. Let’s break it down step by step.

---

## 1️⃣ **Server Setup (`server.js`)** 🖥️

```js
app.get('/mami', (req, res) => {
    res.render('unescapedOutput', {
        htmls: [
            `<h1>Hello world</h1>`,
            `<h2>This is a simple html snippet</h2>`,
            `<p>This is a paragraph</p>`,
            `<button>click me</button>`
        ]
    });
});
```

**Explanation:**

* Route `/mami` renders the **`unescapedOutput.ejs`** template.
* Sends an array `htmls` containing **HTML snippets**.
* We will display these snippets **escaped** and **unescaped** in EJS.

---

## 2️⃣ **EJS Template (`views/unescapedOutput.ejs`)** 📄

```ejs
<h1>Hello from unescaped output ejs</h1>

<!-- Escaped output -->
<% htmls.forEach(html => { %>
    <%= html %>
<% }) %>

<!-- Unescaped output -->
<% htmls.forEach(html => { %>
    <%- html %>
<% }) %>
```

**Explanation:**

1. **Escaped Output `<%= html %>`**

   * Converts HTML tags into **escaped characters** (`<` → `&lt;`, `>` → `&gt;`)
   * Browser renders **as text**, not HTML

2. **Unescaped Output `<%- html %>`**

   * Outputs HTML **as-is**
   * Browser renders **actual HTML elements**

---

## 3️⃣ **What Happens in the Browser** 🌐

### a) **Escaped Output Section**

Rendered as **text**:

```
<h1>Hello world</h1>
<h2>This is a simple html snippet</h2>
<p>This is a paragraph</p>
<button>click me</button>
```

* The tags are visible as plain text.
* Safe if content is **untrusted**.

### b) **Unescaped Output Section**

Rendered as **actual HTML**:

* `<h1>Hello world</h1>` → displays **Hello world** as a large heading
* `<h2>This is a simple html snippet</h2>` → displays smaller heading
* `<p>This is a paragraph</p>` → displays paragraph text
* `<button>click me</button>` → displays a clickable button

**Visual Output Example:**

**Escaped:**

```
<h1>Hello world</h1>
<h2>This is a simple html snippet</h2>
<p>This is a paragraph</p>
<button>click me</button>
```

**Unescaped:**

* Hello world  (big heading)
* This is a simple html snippet  (subheading)
* This is a paragraph
* \[click me]  (button element rendered)

---

## 4️⃣ **Key Takeaways** ✅

| EJS Tag  | Purpose                                  | Output              | When to Use                    |
| -------- | ---------------------------------------- | ------------------- | ------------------------------ |
| `<%= %>` | Escaped output (safe for untrusted HTML) | Shows HTML as text  | Display user input safely      |
| `<%- %>` | Raw/unescaped HTML                       | Renders actual HTML | Trusted/sanitized HTML content |

* **Escaped (`<%= %>`)** → prevents XSS attacks
* **Unescaped (`<%- %>`)** → renders full HTML, useful for dynamic templates

---

💡 **Emoji Summary:**

* 🔒 `<%= %>` → safe, text output
* 🌟 `<%- %>` → actual HTML elements
* 🖥️ Example demonstrates the difference visually in browser

---