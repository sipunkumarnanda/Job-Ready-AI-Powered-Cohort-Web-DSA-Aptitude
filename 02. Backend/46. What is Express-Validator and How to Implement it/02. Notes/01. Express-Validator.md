

## üß© What is `express-validator`?

**`express-validator`** is a **middleware** for **Express.js** that helps you:

* Validate and sanitize user input (e.g., form data, JSON body, query params)
* Prevent invalid or unsafe data from being processed
* Easily send helpful error messages back to the client

It‚Äôs built on top of the popular **validator.js** library.

---

## ‚öôÔ∏è Installation

In your project folder, run:

```bash
npm install express-validator
```

---

## üß† Basic Idea

You define **validation rules** using `body()`, `param()`, or `query()`,
and then **check the result** using `validationResult()`.

---

## ‚úÖ Example: Register User

### 1Ô∏è‚É£ Create Validation Rules

```js
// middleware/validator.middleware.js
const { body, validationResult } = require('express-validator');

// Middleware to check for validation errors
function validate(req, res, next) {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return res.status(400).json({ errors: errors.array() });
  }
  next();
}

// Validation rules for registration
const registerValidationRules = [
  body('username')
    .isString().withMessage('Username must be a string')
    .isLength({ min: 3 }).withMessage('Username must be at least 3 characters long'),

  body('email')
    .isEmail().withMessage('Please provide a valid email'),

  body('password')
    .isLength({ min: 6 }).withMessage('Password must be at least 6 characters long'),

  validate // run the validation check at the end
];

module.exports = { registerValidationRules };
```

---

### 2Ô∏è‚É£ Use It in a Route

```js
// app.js
const express = require('express');
const { registerValidationRules } = require('./middleware/validator.middleware');

const app = express();
app.use(express.json());

// Example route
app.post('/register', registerValidationRules, (req, res) => {
  res.json({ message: 'User registered successfully!' });
});

app.listen(3000, () => console.log('Server running on port 3000'));
```

---

### 3Ô∏è‚É£ Test It

Send a request with invalid data using Postman or curl:

```bash
POST http://localhost:3000/register
Content-Type: application/json

{
  "username": "ab",
  "email": "invalidemail",
  "password": "123"
}
```

You‚Äôll get:

```json
{
  "errors": [
    { "msg": "Username must be at least 3 characters long", "param": "username" },
    { "msg": "Please provide a valid email", "param": "email" },
    { "msg": "Password must be at least 6 characters long", "param": "password" }
  ]
}
```

---

## üí° Common Validators

| Function                | Purpose                               |
| ----------------------- | ------------------------------------- |
| `.isEmail()`            | Check if value is a valid email       |
| `.isString()`           | Check if value is a string            |
| `.isInt()`              | Check if value is an integer          |
| `.isLength({min, max})` | Check string length                   |
| `.isIn(['x', 'y'])`     | Check if value is one of given values |
| `.matches(regex)`       | Validate against regex                |
| `.notEmpty()`           | Ensure field isn‚Äôt empty              |

---

## üßº Sanitizers (Optional)

You can also clean input before saving:

```js
body('email').trim().normalizeEmail(),
body('username').trim().escape(),
```

---

‚úÖ **In summary:**

* `express-validator` = input validation middleware for Express.
* Use `body()` / `param()` / `query()` to define rules.
* Use `validationResult()` to handle and respond to errors.
* Helps keep your backend **safe, consistent, and reliable.**

---