
# ğŸ–¥ï¸ What is **STDIN/STDOUT**?

* **stdin** = Standard Input â†’ a data stream programs **read from**.
* **stdout** = Standard Output â†’ a data stream programs **write to**.
* In Node.js, you interact with them via `process.stdin` and `process.stdout`.

---

# ğŸ”— How does MCP use stdin/stdout?

In MCP with **STDIO transport**:

* The **client (AI app)** spawns the MCP server as a **child process**.
* Communication flows through **stdin (input)** and **stdout (output)** as structured **JSON-RPC messages**.

---

# âš¡ Example Flow

### Client â†’ Server (via stdin)

```json
{"jsonrpc": "2.0", "id": 1, "method": "greet", "params": {"name": "Alice"}}
```

### Server â†’ Client (via stdout)

```json
{"jsonrpc": "2.0", "id": 1, "result": "Hello Alice!"}
```

---

# ğŸ§‘â€ğŸ’» Minimal MCP Server (Node.js Example)

```js
#!/usr/bin/env node

// Read from stdin
process.stdin.on("data", (chunk) => {
  try {
    const message = JSON.parse(chunk.toString());

    if (message.method === "greet") {
      const name = message.params?.name || "World";

      // Send response to stdout
      const response = {
        jsonrpc: "2.0",
        id: message.id,
        result: `Hello ${name}, welcome to MCP!`
      };

      process.stdout.write(JSON.stringify(response) + "\n");
    }
  } catch (err) {
    const errorResponse = {
      jsonrpc: "2.0",
      id: null,
      error: { code: -32700, message: "Parse error" }
    };
    process.stdout.write(JSON.stringify(errorResponse) + "\n");
  }
});
```

ğŸ‘‰ Whatâ€™s happening:

* `process.stdin` reads JSON-RPC requests.
* Server parses the request, processes it, and writes back JSON to `process.stdout`.

---

# âš ï¸ Important Gotchas (Node.js)

* **Never use `console.log()` for debugging** âŒ â†’ it writes to **stdout** and corrupts the JSON stream.
* Use `console.error()` âœ… â†’ logs go to **stderr**, safe for debugging.

```js
console.error("This is a debug log"); // âœ… safe, goes to stderr
console.log("Hello"); // âŒ unsafe, goes to stdout
```

---

# âœ… Why STDIO in MCP?

* **Simplicity** â†’ no HTTP server needed.
* **Security** â†’ local-only communication.
* **Performance** â†’ low overhead, very fast.
* **Reliability** â†’ works offline.

---

# ğŸ—£ï¸ Interview-Ready Answer

> â€œIn Node.js MCP servers, stdin and stdout refer to the **stdio transport**. The client spawns the server as a child process, sends JSON-RPC requests through stdin, and the server responds through stdout. This design is simple, secure, and efficient, making it ideal for local integrations. A key practice is to never use console.log for debugging, since stdout is reserved for protocol messages â€” instead, logs should go to stderr.â€

---