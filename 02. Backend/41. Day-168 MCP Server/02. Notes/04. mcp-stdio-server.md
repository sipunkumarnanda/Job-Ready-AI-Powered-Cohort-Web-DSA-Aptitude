
# 🖥️ What is **STDIN/STDOUT**?

* **stdin** = Standard Input → a data stream programs **read from**.
* **stdout** = Standard Output → a data stream programs **write to**.
* In Node.js, you interact with them via `process.stdin` and `process.stdout`.

---

# 🔗 How does MCP use stdin/stdout?

In MCP with **STDIO transport**:

* The **client (AI app)** spawns the MCP server as a **child process**.
* Communication flows through **stdin (input)** and **stdout (output)** as structured **JSON-RPC messages**.

---

# ⚡ Example Flow

### Client → Server (via stdin)

```json
{"jsonrpc": "2.0", "id": 1, "method": "greet", "params": {"name": "Alice"}}
```

### Server → Client (via stdout)

```json
{"jsonrpc": "2.0", "id": 1, "result": "Hello Alice!"}
```

---

# 🧑‍💻 Minimal MCP Server (Node.js Example)

```js
#!/usr/bin/env node

// Read from stdin
process.stdin.on("data", (chunk) => {
  try {
    const message = JSON.parse(chunk.toString());

    if (message.method === "greet") {
      const name = message.params?.name || "World";

      // Send response to stdout
      const response = {
        jsonrpc: "2.0",
        id: message.id,
        result: `Hello ${name}, welcome to MCP!`
      };

      process.stdout.write(JSON.stringify(response) + "\n");
    }
  } catch (err) {
    const errorResponse = {
      jsonrpc: "2.0",
      id: null,
      error: { code: -32700, message: "Parse error" }
    };
    process.stdout.write(JSON.stringify(errorResponse) + "\n");
  }
});
```

👉 What’s happening:

* `process.stdin` reads JSON-RPC requests.
* Server parses the request, processes it, and writes back JSON to `process.stdout`.

---

# ⚠️ Important Gotchas (Node.js)

* **Never use `console.log()` for debugging** ❌ → it writes to **stdout** and corrupts the JSON stream.
* Use `console.error()` ✅ → logs go to **stderr**, safe for debugging.

```js
console.error("This is a debug log"); // ✅ safe, goes to stderr
console.log("Hello"); // ❌ unsafe, goes to stdout
```

---

# ✅ Why STDIO in MCP?

* **Simplicity** → no HTTP server needed.
* **Security** → local-only communication.
* **Performance** → low overhead, very fast.
* **Reliability** → works offline.

---

# 🗣️ Interview-Ready Answer

> “In Node.js MCP servers, stdin and stdout refer to the **stdio transport**. The client spawns the server as a child process, sends JSON-RPC requests through stdin, and the server responds through stdout. This design is simple, secure, and efficient, making it ideal for local integrations. A key practice is to never use console.log for debugging, since stdout is reserved for protocol messages — instead, logs should go to stderr.”

---