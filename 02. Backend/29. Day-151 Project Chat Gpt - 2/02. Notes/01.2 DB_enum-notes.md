
# ğŸ­ Understanding `enum` in Mongoose Schema

---

## ğŸ› ï¸ Code Snippet

```js
role: {
  type: String,
  enum: ["user", "model", "system"],
  default: "user",
}
```

---

## ğŸ“– Detailed Explanation

### 1ï¸âƒ£ What is `enum`?

* `enum` stands for **enumeration**.
* In Mongoose, it **restricts a field to accept only specific values**.
* It acts as a **validation mechanism** to ensure data integrity.
* If a value outside the allowed list is inserted, Mongoose **throws a validation error**.

---

### 2ï¸âƒ£ How `enum` Works in the `role` Field

* **Field Name:** `role`
* **Type:** `String`
* **Allowed Values:** `"user"`, `"model"`, `"system"`
* **Default Value:** `"user"`

| Value      | Meaning                                     | Emoji |
| ---------- | ------------------------------------------- | ----- |
| `"user"`   | A human user sending the message            | ğŸ‘¤    |
| `"model"`  | AI or automated system generating a message | ğŸ¤–    |
| `"system"` | System-generated message or instruction     | âš™ï¸    |

âœ… Only these three values are valid. Any other string will trigger a validation error.

---

### 3ï¸âƒ£ Purpose of `enum`

* Ensures **data consistency**: prevents typos or invalid role entries.
* Makes **queries predictable**: you always know the possible roles in the database.
* Improves **code readability**: developers instantly understand the role of a message.

---

### 4ï¸âƒ£ Default Value

```js
default: "user"
```

* If no `role` is provided when creating a message, Mongoose automatically sets it to `"user"`.
* Ensures that **every message has a valid role**, avoiding null or undefined values.

---

### 5ï¸âƒ£ Example Usage

```js
// âœ… Valid
const msg1 = await messageModel.create({
  userId: "64f1d2a5b2c8a0a1",
  chatId: "64f1d2a5b2c8a0b2",
  content: "Hello!",
  role: "user"
});

// âŒ Invalid (throws validation error)
const msg2 = await messageModel.create({
  userId: "64f1d2a5b2c8a0a1",
  chatId: "64f1d2a5b2c8a0b2",
  content: "Hello!",
  role: "admin"  // âŒ Not in enum
});
```

---

### 6ï¸âƒ£ Key Takeaways

* `enum` **limits values** and prevents invalid data.
* Combines well with `default` to maintain **data integrity**.
* Ideal for fields that have **finite, known options** (like status, role, type, category).

---