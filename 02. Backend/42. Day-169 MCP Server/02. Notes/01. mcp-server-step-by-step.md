
# ⚡🚀 MCP Server Setup & Addition Tool Explained – Step by Step 🛠️📊

# 📝 `mcp.server.js`

```javascript
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import { z } from "zod";

// Create an MCP server
const server = new McpServer({
  name: "demo-server",
  version: "1.0.0",
});

// Add an addition tool
server.registerTool("addTwoNumbers" ,
  {
    title: "Addition Tool",
    description: "Add two numbers",
    inputSchema: {
         a: z.number().describe("The first number"), 
         b: z.number().describe("The second number") 
         },
  },
  async ({ a, b }) => {
    return {
      content: [{ type: "text", text: String(a + b) }],
    };
  }
);

// Start receiving messages on stdin and sending messages on stdout
const transport = new StdioServerTransport();
await server.connect(transport);
```

---

# 📦 1️⃣ Imports

```javascript
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import { z } from "zod";
```

**Explanation:**

* `McpServer`: This is the main class to create a **Model Context Protocol (MCP) server**. It handles incoming requests and tool execution. ⚙️
* `StdioServerTransport`: Provides a **communication channel** using standard input/output. This allows your server to interact with other processes or clients via stdin/stdout. 🔄
* `z`: A **validation library (Zod)** used to define and enforce **schemas** for input data. It ensures inputs are the correct type. ✅

---

# 🏗 2️⃣ Create MCP Server

```javascript
const server = new McpServer({
  name: "demo-server",
  version: "1.0.0",
});
```

**Explanation:**

* Creates a new **MCP server instance**.
* `name`: Human-readable name of the server.
* `version`: Server version, useful for **tracking updates** or **compatibility**.

Think of this as **turning on the server and giving it an ID card**. 🆔

---

# ➕ 3️⃣ Register a Tool

```javascript
server.registerTool("addTwoNumbers" ,
  {
    title: "Addition Tool",
    description: "Add two numbers",
    inputSchema: {
         a: z.number().describe("The first number"), 
         b: z.number().describe("The second number") 
         },
  },
  async ({ a, b }) => {
    return {
      content: [{ type: "text", text: String(a + b) }],
    };
  }
);
```

**Explanation:**

* `registerTool(name, metadata, handler)`: Adds a **custom tool** to the server that clients can call. 🛠️
* `metadata`: Describes the tool:

  * `title`: Friendly name of the tool.
  * `description`: What the tool does.
  * `inputSchema`: Uses Zod to **validate inputs** `a` and `b` as numbers.
* `handler`: An **async function** that performs the tool's operation.

  * Here it **adds two numbers** and returns the result in the expected MCP message format:

    ```json
    { content: [{ type: "text", text: "sum" }] }
    ```

✅ This makes your server **capable of performing addition on demand**.

---

# 🔌 4️⃣ Connect via Stdio Transport

```javascript
const transport = new StdioServerTransport();
await server.connect(transport);
```

**Explanation:**

* Creates a `StdioServerTransport` instance. This allows **message exchange via stdin/stdout**. 📨
* `server.connect(transport)`: Starts the server and **listens for incoming messages**.
* Once connected, the server can **receive commands from a client** and **send back responses**.

💡 Essentially, this is **plugging your server into a communication pipeline**.

---

# ⚡ Summary

* Imports MCP SDK and Zod for validation.
* Creates a server named `demo-server`.
* Registers an **addition tool** with input validation.
* Uses **stdio** for communication with clients.
* Ready to handle requests dynamically! 🚀

---