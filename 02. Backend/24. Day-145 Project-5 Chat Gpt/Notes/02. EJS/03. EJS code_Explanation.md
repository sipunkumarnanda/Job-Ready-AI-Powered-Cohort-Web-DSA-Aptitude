
# ğŸŒŸ Understanding EJS with Your Project (Step by Step)

---

## ğŸ“‚ 1. File Structure Overview

Hereâ€™s your project tree (simplified):

```
backend/
â”‚
â”œâ”€â”€ node_modules/            # Installed dependencies
â”‚
â”œâ”€â”€ public/                  # Public static files (CSS, JS, images, etc.)
â”‚   â”œâ”€â”€ script.js
â”‚   â””â”€â”€ style.css
â”‚
â”œâ”€â”€ src/                     # Main source folder for backend code
â”‚   â”œâ”€â”€ routes/              # Routes folder
â”‚   â”‚   â””â”€â”€ index.routes.js  # Route definitions
â”‚   â””â”€â”€ app.js               # App configuration (middleware, routes, settings)
â”‚
â”œâ”€â”€ views/                   # EJS templates
â”‚   â””â”€â”€ index.ejs
â”‚
â”œâ”€â”€ server.js                # Starts the server
â”œâ”€â”€ package.json             # Project config + dependencies
â””â”€â”€ .gitignore               # Ignore node_modules, etc.
```

ğŸ‘‰ This structure is **clean and professional**:

* `public/` â†’ static files (CSS, JS, images).
* `views/` â†’ EJS templates (your frontend HTML with dynamic data).
* `src/` â†’ backend logic (routes, app setup).
* `server.js` â†’ main entry point.

---

## ğŸ› ï¸ 2. `app.js` â†’ Express App Setup

```js
import express from 'express'
import router from './routes/index.routes.js'

const app = express()

// 1ï¸âƒ£ Set EJS as the View Engine
app.set("view engine", "ejs")

// 2ï¸âƒ£ Middlewares for Parsing Data
app.use(express.json())
app.use(express.urlencoded({ extended: true }))

// 3ï¸âƒ£ Public Folder Setup
app.use(express.static('public'))

// 4ï¸âƒ£ Route Handling
app.use('/', router)

export default app
```

### ğŸ” Line-by-Line Explanation:

1. **`import express from 'express'`** â†’ imports Express framework.
2. **`import router from './routes/index.routes.js'`** â†’ loads your route file.
3. **`app.set("view engine", "ejs")`** â†’ tells Express to use **EJS** for rendering `.ejs` files inside the `views/` folder by default.
4. **`app.use(express.json())`** â†’ allows API to handle JSON requests.
   Example: `POST /api { "name": "John" }`.
5. **`app.use(express.urlencoded({ extended: true }))`** â†’ allows handling **form submissions** (HTML forms send URL-encoded data).
6. **`app.use(express.static('public'))`** â†’ serves files like `style.css` and `script.js` directly from `/public`.
   ğŸ‘‰ Means: `<link href="style.css">` in your `index.ejs` works automatically.
7. **`app.use('/', router)`** â†’ all routes are handled inside your `routes/index.routes.js`.

---

## ğŸ–¥ï¸ 3. `server.js` â†’ Starting the Server

```js
import app from "./src/app.js";

app.listen(3000, (() => {
    console.log("Server is ruuning on port 3000");
}))
```

### ğŸ” Explanation:

* Imports your **configured app** from `app.js`.
* Runs server on **[http://localhost:3000](http://localhost:3000)**.
* `app.listen(3000)` keeps the server alive and listening for requests.

---

## ğŸš¦ 4. `index.routes.js` â†’ Defining Routes

```js
import express from 'express'

const router = express.Router()

router.get('/', (req,res) => {
    res.render("index")
})

export default router
```

### ğŸ” Explanation:

1. **`express.Router()`** â†’ creates a mini app (router).
2. **`router.get('/')`** â†’ defines route for homepage (`/`).
3. **`res.render("index")`** â†’ renders `views/index.ejs`.
   ğŸ‘‰ No `.ejs` needed, Express automatically looks inside `views/`.

---

## ğŸ“ 5. `index.ejs` â†’ EJS Template

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Welcome to home page</h1>
  <p>This is the main content of the page</p>
  <script src="script.js"></script>
</body>
</html>
```

### ğŸ” Explanation:

* This looks like **HTML**, but since itâ€™s `.ejs`, you can add **dynamic content** with `<%= %>`.
* Example:

```html
<h1>Welcome <%= username %></h1>
```

If in route:

```js
res.render("index", { username: "Sipun" })
```

ğŸ‘‰ Page will show:
**Welcome Sipun** ğŸ‰

---

## ğŸ“‚ 6. `public/script.js` & `public/style.css`

### `style.css`

```css
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}
```

* Adds styles to your EJS page.
* Automatically loaded because of `app.use(express.static('public'))`.

### `script.js`

```js
console.log("Frontend JS loaded!")
```

* Runs on the client side (browser).

---

# âš¡ How the Flow Works

1. You open `http://localhost:3000/`.
2. Request goes â†’ **server.js** â†’ **app.js** â†’ **index.routes.js**.
3. Route `/` calls â†’ `res.render("index")`.
4. Express finds â†’ `views/index.ejs`.
5. EJS template + any data passed (like `{ username: "Sipun" }`) â†’ gets rendered into plain HTML.
6. Browser loads that HTML and automatically pulls CSS (`public/style.css`) and JS (`public/script.js`).

---

# ğŸ¯ Why Each Thing is Needed

* **EJS (views/)** â†’ Write HTML + Dynamic data.
* **Express (app.js)** â†’ Setup app, middlewares, and tell it how to render EJS.
* **Routes (routes/)** â†’ Define which page (URL) to render.
* **Server.js** â†’ Starts everything.
* **Public folder** â†’ Store CSS/JS/images that browser can load directly.

---

âœ… So with your given code, you have built a **basic SSR app using EJS** where:

* **Backend** handles routes + rendering.
* **EJS** creates dynamic HTML.
* **Public folder** serves static assets.

---