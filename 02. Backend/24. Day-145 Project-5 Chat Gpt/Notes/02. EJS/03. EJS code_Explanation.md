
# 🌟 Understanding EJS with Your Project (Step by Step)

---

## 📂 1. File Structure Overview

Here’s your project tree (simplified):

```
backend/
│
├── node_modules/            # Installed dependencies
│
├── public/                  # Public static files (CSS, JS, images, etc.)
│   ├── script.js
│   └── style.css
│
├── src/                     # Main source folder for backend code
│   ├── routes/              # Routes folder
│   │   └── index.routes.js  # Route definitions
│   └── app.js               # App configuration (middleware, routes, settings)
│
├── views/                   # EJS templates
│   └── index.ejs
│
├── server.js                # Starts the server
├── package.json             # Project config + dependencies
└── .gitignore               # Ignore node_modules, etc.
```

👉 This structure is **clean and professional**:

* `public/` → static files (CSS, JS, images).
* `views/` → EJS templates (your frontend HTML with dynamic data).
* `src/` → backend logic (routes, app setup).
* `server.js` → main entry point.

---

## 🛠️ 2. `app.js` → Express App Setup

```js
import express from 'express'
import router from './routes/index.routes.js'

const app = express()

// 1️⃣ Set EJS as the View Engine
app.set("view engine", "ejs")

// 2️⃣ Middlewares for Parsing Data
app.use(express.json())
app.use(express.urlencoded({ extended: true }))

// 3️⃣ Public Folder Setup
app.use(express.static('public'))

// 4️⃣ Route Handling
app.use('/', router)

export default app
```

### 🔎 Line-by-Line Explanation:

1. **`import express from 'express'`** → imports Express framework.
2. **`import router from './routes/index.routes.js'`** → loads your route file.
3. **`app.set("view engine", "ejs")`** → tells Express to use **EJS** for rendering `.ejs` files inside the `views/` folder by default.
4. **`app.use(express.json())`** → allows API to handle JSON requests.
   Example: `POST /api { "name": "John" }`.
5. **`app.use(express.urlencoded({ extended: true }))`** → allows handling **form submissions** (HTML forms send URL-encoded data).
6. **`app.use(express.static('public'))`** → serves files like `style.css` and `script.js` directly from `/public`.
   👉 Means: `<link href="style.css">` in your `index.ejs` works automatically.
7. **`app.use('/', router)`** → all routes are handled inside your `routes/index.routes.js`.

---

## 🖥️ 3. `server.js` → Starting the Server

```js
import app from "./src/app.js";

app.listen(3000, (() => {
    console.log("Server is ruuning on port 3000");
}))
```

### 🔎 Explanation:

* Imports your **configured app** from `app.js`.
* Runs server on **[http://localhost:3000](http://localhost:3000)**.
* `app.listen(3000)` keeps the server alive and listening for requests.

---

## 🚦 4. `index.routes.js` → Defining Routes

```js
import express from 'express'

const router = express.Router()

router.get('/', (req,res) => {
    res.render("index")
})

export default router
```

### 🔎 Explanation:

1. **`express.Router()`** → creates a mini app (router).
2. **`router.get('/')`** → defines route for homepage (`/`).
3. **`res.render("index")`** → renders `views/index.ejs`.
   👉 No `.ejs` needed, Express automatically looks inside `views/`.

---

## 📝 5. `index.ejs` → EJS Template

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Welcome to home page</h1>
  <p>This is the main content of the page</p>
  <script src="script.js"></script>
</body>
</html>
```

### 🔎 Explanation:

* This looks like **HTML**, but since it’s `.ejs`, you can add **dynamic content** with `<%= %>`.
* Example:

```html
<h1>Welcome <%= username %></h1>
```

If in route:

```js
res.render("index", { username: "Sipun" })
```

👉 Page will show:
**Welcome Sipun** 🎉

---

## 📂 6. `public/script.js` & `public/style.css`

### `style.css`

```css
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}
```

* Adds styles to your EJS page.
* Automatically loaded because of `app.use(express.static('public'))`.

### `script.js`

```js
console.log("Frontend JS loaded!")
```

* Runs on the client side (browser).

---

# ⚡ How the Flow Works

1. You open `http://localhost:3000/`.
2. Request goes → **server.js** → **app.js** → **index.routes.js**.
3. Route `/` calls → `res.render("index")`.
4. Express finds → `views/index.ejs`.
5. EJS template + any data passed (like `{ username: "Sipun" }`) → gets rendered into plain HTML.
6. Browser loads that HTML and automatically pulls CSS (`public/style.css`) and JS (`public/script.js`).

---

# 🎯 Why Each Thing is Needed

* **EJS (views/)** → Write HTML + Dynamic data.
* **Express (app.js)** → Setup app, middlewares, and tell it how to render EJS.
* **Routes (routes/)** → Define which page (URL) to render.
* **Server.js** → Starts everything.
* **Public folder** → Store CSS/JS/images that browser can load directly.

---

✅ So with your given code, you have built a **basic SSR app using EJS** where:

* **Backend** handles routes + rendering.
* **EJS** creates dynamic HTML.
* **Public folder** serves static assets.

---