
# Notes — `intents: [ GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages, GatewayIntentBits.MessageContent ]`

Deep, structured, in-depth explanation of **Guilds**, **GuildMessages**, and **MessageContent** (what they do, why they matter, pitfalls, examples, best practices). 💡🔥

---

## Quick context — why `intents` at all

Discord introduced *gateway intents* so bots explicitly request only the event groups they need. This reduces noise, improves performance, and protects user privacy (some intents are “privileged” and require extra approval). When you pass `intents` into `new Client(...)` you are telling Discord *which categories of events and payload fields* your bot wants to receive. ([discordjs.guide][1])

---

# 1) `GatewayIntentBits.Guilds` — “server metadata & guild lifecycle” 🏷️🏛️

### What it is (short)

`Guilds` is the intent that tells Discord to send your bot **guild-level events** and to populate the client’s basic guild-related caches (guild objects, channels, roles, scheduled events, thread lifecycle, etc.). In other words: *events and objects about servers* (not full member lists). ([discord.js][2], [discordjs.guide][1])

### What it enables (examples)

If you enable `Guilds` your bot will receive (and be able to work with) things like:

* `guildCreate`, `guildDelete`, `guildUpdate` events (bot joins/removed/changes).
* Channel/role objects for that guild (so `guild.channels.cache`, `guild.roles.cache` are populated).
* Thread create/update/delete events and guild-scope changes.
  These make it possible to read and modify server configuration, create channels, fetch roles, etc. ([discord.js][2])

### What it **doesn’t** do

* It does **not** automatically give you a full and always-complete **member list**. For robust member tracking you need `GuildMembers` or explicit fetches. (Member caching is separate.) ([discordjs.guide][1])

### Practical consequences & examples

* With `Guilds` you can do: `client.guilds.cache.get(guildId)`, `guild.channels.cache`, and call REST helpers like `guild.setIcon()`, `guild.leave()`, `guild.fetchOwner()`.
* Use it when your bot needs to react to being added to/removed from servers, enumerate channels or roles, or manage guild-level settings.

### Example:

```js
const client = new Client({ intents: [GatewayIntentBits.Guilds] });

client.on('guildCreate', guild => {
  console.log(`Bot added to: ${guild.name} (id: ${guild.id})`);
});
```

### Best practices / notes

* Always enable `Guilds` for any bot that runs inside servers (virtually every non-DM-only bot).
* Combine with other intents depending on features (e.g., to moderate messages combine with `GuildMessages`). ([discordjs.guide][1])

---

# 2) `GatewayIntentBits.GuildMessages` — “get message events from servers” 💬🏘️

### What it is (short)

`GuildMessages` is the intent that allows your bot to receive **message events created in guild text channels**. Without it, your `messageCreate`/`message` handlers will not be triggered for messages sent in server channels (though other message-related events may still be limited). ([discord.js][2], [discordjs.guide][1])

### What it enables (exact powers)

* Delivery of message-related gateway events for **guild channels** — primarily the `messageCreate` event for messages authored in servers.
* It does **not** by itself guarantee you can *read the textual content* of those messages — that’s governed by `MessageContent` (see next section). ([discord.js][2])

### Typical uses

* Chatbots that react to server messages (e.g., moderation triggers, auto-responders, logging messages).
* Bots that watch for reactions to messages in server channels (combine with reaction intents if needed).

### Example:

```js
const client = new Client({
  intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages]
});

client.on('messageCreate', msg => {
  // This will trigger for messages in guild channels, but msg.content
  // may be empty unless MessageContent intent is also enabled (see below).
  console.log(`message in ${msg.guild?.name}: ${msg.id}`);
});
```

### Pitfalls & gotchas

* If you enable `GuildMessages` but **not** `MessageContent`, you will still receive message events, **but** the `content` (and possibly attachments/embeds/components) may be empty for many messages — which breaks older text-prefix command patterns. See the `MessageContent` section. ([Discord][3], [discordjs.guide][1])
* Also ensure your bot has the **channel permissions** to read messages in that channel — intents are about gateway delivery, channel permissions are about what the bot can see/do in a guild.

---

# 3) `GatewayIntentBits.MessageContent` — “read the words” (privileged) 📝🔒

### What it is (short)

`MessageContent` is a **special, privileged intent** that controls whether your app receives the **full `content`, attachments, embeds, and components** fields in message payloads from the gateway for most messages. Without it, those fields are often blank when you receive message events. This intent is privacy-sensitive and subject to additional rules. ([Discord][4], [Discord Developer Support][5])

> Key point: `GuildMessages` gives you *message events* from servers; `MessageContent` gives you the *actual text/attachments* inside those message objects in most cases.

### Why it’s privileged

Discord treats raw message content as sensitive (it can contain personal data), so access is restricted. Bots that need to read arbitrary message text must request this intent and, for larger/verified bots, may require explicit approval from Discord. ([Discord Developer Support][5], [discordjs.guide][1])

### What you get when it’s enabled

* `message.content`, `message.attachments`, `message.embeds`, `message.components` are populated for regular messages in guilds (subject to exceptions below).
* This enables classic text-prefix commands, content scanning, message-based moderation, natural-language processing, etc. ([Discord Developer Support][5])

### What you can still access **without** this intent

Discord deliberately allows certain safe exceptions so bots can still function in limited ways without `MessageContent`:

* Messages in **direct messages (DMs)** to the bot.
* Messages **that mention** the bot (e.g., `@Bot hello`).
* Messages **sent by** the bot itself.
* In those cases Discord will include content even if MessageContent is not enabled. For all other guild messages the `content` field may be empty unless you have the intent/approval. ([Discord Developer Support][6])

### Administrative / verification rules

* Enabling `MessageContent` in the client code (i.e., passing `GatewayIntentBits.MessageContent`) is only one half — **you must also enable the privilege in your app’s Bot settings in the Discord Developer Portal**. For larger/verified bots Discord may require you to apply and be approved. Read the Developer Portal guidance for current thresholds and application steps. ([Discord Developer Support][7])

### Example code (complete)

```js
import { Client, GatewayIntentBits } from 'discord.js';

const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent
  ]
});

client.on('messageCreate', msg => {
  // With MessageContent granted, msg.content contains the text.
  if (msg.content === '!ping') msg.reply('Pong 🏓');
});
```

### Alternatives & best practice (use when possible)

* **Prefer Interactions (slash commands), buttons, and select menus** for user-facing command systems whenever possible. These features don’t require `MessageContent` and are more privacy-friendly and user-friendly. Use `MessageContent` only when you *must* read arbitrary message text (e.g., moderation scanning, NLP features). ([Discord Developer Support][6])

### Common error / troubleshooting

* Symptom: `msg.content` is `""` or empty and your handlers trigger but have no text.

  * Causes to check:

    1. `GatewayIntentBits.MessageContent` not included in the client `intents`.
    2. Message Content intent not toggled/enabled in the **Developer Portal** for your bot.
    3. Your bot is unverified/over the server threshold and needs explicit approval.
    4. Channel-level permissions prevent reading messages.
  * Docs confirm: if your app isn't approved for the intent, certain fields will arrive empty. ([Stack Overflow][8], [Discord Developer Support][5])

---

# Combined behavior & practical examples ⚙️

* `Guilds` → you *know about* servers, channels, roles; you get guild lifecycle events. ([discord.js][2])
* `GuildMessages` → you *receive message events* when someone posts in a server channel (so `messageCreate` fires). ([discord.js][2])
* `MessageContent` → you *can read the actual content/attachments/embeds* of most server messages (this is privileged; without it those fields may be blank). ([Discord Developer Support][5], [Discord][4])

So: to build a traditional text-prefix command bot that reacts to `!help` in server channels you need **both** `GuildMessages` (to get the event) **and** `MessageContent` (to see `!help`), plus the Developer Portal setting enabled. If you only enable `GuildMessages` you might get the `messageCreate` events but not the textual content. ([Discord Developer Support][5], [discordjs.guide][1])

---

# Security, privacy & scaling considerations 🔐📈

* **Least privilege:** request only the intents your bot actually needs. Avoid `MessageContent` if interactions/slash commands can do the job. This reduces privacy exposure and eases approval. ([Discord Developer Support][6])
* **Privileged intents & approval:** if your bot is large/verified, Discord may require you to apply for `MessageContent` (and `GuildMembers`/`GuildPresences`) and explain your use-case. Read the Developer Portal docs and the Message Content FAQ. ([Discord Developer Support][5])
* **Performance:** more intents → more events and more cache population → more memory/CPU usage. For big bots consider sharding and careful caching strategies. ([discordjs.guide][1])

---

# Practical checklist (quick) ✅

* Want guild events, channels, roles? → enable `GatewayIntentBits.Guilds`. ([discord.js][2])
* Want to react to messages in servers? → enable `GatewayIntentBits.GuildMessages`. ([discord.js][2])
* Want to read **message text and attachments** for arbitrary server messages? → enable `GatewayIntentBits.MessageContent` **and** toggle/approve it in Developer Portal (or use interactions instead). ([Discord Developer Support][5])

---

# Troubleshooting cheat-sheet 🛠️

* `messageCreate` fires but `msg.content === ""` → check `MessageContent` in code + Developer Portal; check channel permissions. ([Stack Overflow][8], [Discord Developer Support][5])
* `guilds.cache` empty / missing channels → ensure `Guilds` intent is enabled; fetch missing data via API (`guild.channels.fetch()` / `guild.members.fetch()` as needed). ([discordjs.guide][1])
* Want to avoid approval/privilege headaches? → switch to slash commands / interactions and event-based data that doesn’t require `MessageContent`. ([Discord Developer Support][6])

---

# Short examples (common setups)

**Minimal server message bot (slash-command oriented — *no* MessageContent):**

```js
const client = new Client({
  intents: [ GatewayIntentBits.Guilds ] // only guild metadata; use slash commands
});
```

**Classic text-prefix bot (needs to read content in servers):**

```js
const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent
  ]
});
// Also: enable Message Content in Developer Portal (and apply if required)
```

---

# Sources / further reading (official & authoritative)

* discord.js Guide — Gateway Intents (guide & best practices). ([discordjs.guide][1])
* discord.js / discord-api-types docs — `GatewayIntentBits` enum (what each bit does / values). ([discord.js][2])
* Discord Developer Docs — Gateway & MESSAGE\_CONTENT description. ([Discord][4])
* Discord Developer Support — Message Content intent FAQ / alternatives & rules about privileged intent access. ([Discord Developer Support][5])

---