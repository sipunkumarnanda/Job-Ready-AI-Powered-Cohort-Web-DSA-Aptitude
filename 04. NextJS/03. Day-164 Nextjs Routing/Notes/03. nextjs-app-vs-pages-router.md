
# 📝 Next.js — App Router vs Pages Router

---

## 🔹 1. Background

* **Pages Router** → the **old routing system** (Next.js ≤12, still supported in 13/14 for backward compatibility).
* **App Router** → the **new routing system**, introduced in **Next.js 13**, built on **React Server Components** and new conventions.

---

## 🔹 2. Location & File Structure

### **Pages Router (old)**

* Based on `pages/` directory.
* Each `.js/.tsx` file in `pages/` automatically becomes a route.
* Example:

  ```
  pages/
   ├─ index.js      → /
   ├─ about.js      → /about
   └─ blog/[id].js  → /blog/:id
  ```

### **App Router (new)**

* Based on `app/` directory.
* Uses **special files** (`page.js`, `layout.js`, `loading.js`, `error.js`, `not-found.js`) for routes and UI states.
* Example:

  ```
  app/
   ├─ layout.js        → root layout
   ├─ page.js          → /
   ├─ about/
   │   └─ page.js      → /about
   └─ blog/
       ├─ [id]/
       │   └─ page.js  → /blog/:id
       └─ not-found.js
  ```

---

## 🔹 3. Rendering Model

### **Pages Router**

* Built on **React Client Components**.
* Server-Side Rendering (SSR) is possible with `getServerSideProps`.
* Static Site Generation (SSG) with `getStaticProps` + `getStaticPaths`.
* Client-heavy by default, unless optimized.

### **App Router**

* Built on **React Server Components (RSC)**.
* **Server-first by default** → faster, smaller bundles.
* Automatic data fetching using `async` components (no need for `getServerSideProps`).
* Can mix **Server Components** and **Client Components**.

---

## 🔹 4. Data Fetching

### Pages Router

* Uses special functions:

  * `getStaticProps`
  * `getServerSideProps`
  * `getStaticPaths`

### App Router

* Fetch directly inside components:

  ```js
  export default async function Page() {
    const data = await fetch('https://api.example.com/posts').then(r => r.json());
    return <div>{data.title}</div>;
  }
  ```
* Simpler and fully integrated with **RSC**.

---

## 🔹 5. Layouts

### Pages Router

* No built-in layout system.
* You typically wrap `_app.js` or create custom HOCs for consistent UI.

### App Router

* Has **nested layouts** out of the box (`layout.js`).
* Layouts persist between pages → no re-mounts, smoother transitions.
* Supports segment-based layouts (e.g., `/dashboard` can have its own layout).

---

## 🔹 6. Special Files

### Pages Router

* `_app.js` → global wrapper.
* `_document.js` → customize HTML structure.
* `_error.js` → error UI.

### App Router

* `layout.js` → persistent layouts.
* `page.js` → actual page.
* `loading.js` → loading UI.
* `error.js` → error boundaries.
* `not-found.js` → 404 UI.
* `route.js` → API routes in App Router.

---

## 🔹 7. Current Status

* Both **App Router** and **Pages Router** can coexist in the same project (in Next.js 13/14).
* Long term → **App Router is the future**, Pages Router will eventually be deprecated.

---

## 🔹 8. Quick Comparison Table

| Feature       | Pages Router (`pages/`)                | App Router (`app/`)                                               |
| ------------- | -------------------------------------- | ----------------------------------------------------------------- |
| Introduced in | Legacy (Next.js ≤12)                   | Next.js 13+                                                       |
| Rendering     | Client-first, SSR via props            | Server-first (RSC)                                                |
| Data Fetching | `getStaticProps`, `getServerSideProps` | Direct `async`/`fetch` in components                              |
| Layouts       | `_app.js`, manual work                 | `layout.js` (nested, automatic)                                   |
| Special files | `_app.js`, `_document.js`, `_error.js` | `layout.js`, `loading.js`, `error.js`, `not-found.js`, `route.js` |
| Status        | Still supported                        | Future of Next.js                                                 |

---

## 🔹 9. TL;DR

* **Pages Router** → older, client-heavy, uses special data fetching methods.
* **App Router** → new, server-first, nested layouts, simpler data fetching, more powerful.
* Both can exist together today, but **App Router is the recommended approach** for new projects.

---

**Pages Router** (old): Uses the `pages/` folder, client-first, data fetching via `getStaticProps` / `getServerSideProps`, no built-in nested layouts.

**App Router** (new): Uses the `app/` folder, server-first with React Server Components, supports `layout.js`, `loading.js`, `error.js`, `not-found.js`, and allows direct `async`/`fetch` for data fetching.