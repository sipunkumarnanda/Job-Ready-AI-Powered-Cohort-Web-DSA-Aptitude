
# ðŸ“ Next.js â€” App Router vs Pages Router

---

## ðŸ”¹ 1. Background

* **Pages Router** â†’ the **old routing system** (Next.js â‰¤12, still supported in 13/14 for backward compatibility).
* **App Router** â†’ the **new routing system**, introduced in **Next.js 13**, built on **React Server Components** and new conventions.

---

## ðŸ”¹ 2. Location & File Structure

### **Pages Router (old)**

* Based on `pages/` directory.
* Each `.js/.tsx` file in `pages/` automatically becomes a route.
* Example:

  ```
  pages/
   â”œâ”€ index.js      â†’ /
   â”œâ”€ about.js      â†’ /about
   â””â”€ blog/[id].js  â†’ /blog/:id
  ```

### **App Router (new)**

* Based on `app/` directory.
* Uses **special files** (`page.js`, `layout.js`, `loading.js`, `error.js`, `not-found.js`) for routes and UI states.
* Example:

  ```
  app/
   â”œâ”€ layout.js        â†’ root layout
   â”œâ”€ page.js          â†’ /
   â”œâ”€ about/
   â”‚   â””â”€ page.js      â†’ /about
   â””â”€ blog/
       â”œâ”€ [id]/
       â”‚   â””â”€ page.js  â†’ /blog/:id
       â””â”€ not-found.js
  ```

---

## ðŸ”¹ 3. Rendering Model

### **Pages Router**

* Built on **React Client Components**.
* Server-Side Rendering (SSR) is possible with `getServerSideProps`.
* Static Site Generation (SSG) with `getStaticProps` + `getStaticPaths`.
* Client-heavy by default, unless optimized.

### **App Router**

* Built on **React Server Components (RSC)**.
* **Server-first by default** â†’ faster, smaller bundles.
* Automatic data fetching using `async` components (no need for `getServerSideProps`).
* Can mix **Server Components** and **Client Components**.

---

## ðŸ”¹ 4. Data Fetching

### Pages Router

* Uses special functions:

  * `getStaticProps`
  * `getServerSideProps`
  * `getStaticPaths`

### App Router

* Fetch directly inside components:

  ```js
  export default async function Page() {
    const data = await fetch('https://api.example.com/posts').then(r => r.json());
    return <div>{data.title}</div>;
  }
  ```
* Simpler and fully integrated with **RSC**.

---

## ðŸ”¹ 5. Layouts

### Pages Router

* No built-in layout system.
* You typically wrap `_app.js` or create custom HOCs for consistent UI.

### App Router

* Has **nested layouts** out of the box (`layout.js`).
* Layouts persist between pages â†’ no re-mounts, smoother transitions.
* Supports segment-based layouts (e.g., `/dashboard` can have its own layout).

---

## ðŸ”¹ 6. Special Files

### Pages Router

* `_app.js` â†’ global wrapper.
* `_document.js` â†’ customize HTML structure.
* `_error.js` â†’ error UI.

### App Router

* `layout.js` â†’ persistent layouts.
* `page.js` â†’ actual page.
* `loading.js` â†’ loading UI.
* `error.js` â†’ error boundaries.
* `not-found.js` â†’ 404 UI.
* `route.js` â†’ API routes in App Router.

---

## ðŸ”¹ 7. Current Status

* Both **App Router** and **Pages Router** can coexist in the same project (in Next.js 13/14).
* Long term â†’ **App Router is the future**, Pages Router will eventually be deprecated.

---

## ðŸ”¹ 8. Quick Comparison Table

| Feature       | Pages Router (`pages/`)                | App Router (`app/`)                                               |
| ------------- | -------------------------------------- | ----------------------------------------------------------------- |
| Introduced in | Legacy (Next.js â‰¤12)                   | Next.js 13+                                                       |
| Rendering     | Client-first, SSR via props            | Server-first (RSC)                                                |
| Data Fetching | `getStaticProps`, `getServerSideProps` | Direct `async`/`fetch` in components                              |
| Layouts       | `_app.js`, manual work                 | `layout.js` (nested, automatic)                                   |
| Special files | `_app.js`, `_document.js`, `_error.js` | `layout.js`, `loading.js`, `error.js`, `not-found.js`, `route.js` |
| Status        | Still supported                        | Future of Next.js                                                 |

---

## ðŸ”¹ 9. TL;DR

* **Pages Router** â†’ older, client-heavy, uses special data fetching methods.
* **App Router** â†’ new, server-first, nested layouts, simpler data fetching, more powerful.
* Both can exist together today, but **App Router is the recommended approach** for new projects.

---

**Pages Router** (old): Uses the `pages/` folder, client-first, data fetching via `getStaticProps` / `getServerSideProps`, no built-in nested layouts.

**App Router** (new): Uses the `app/` folder, server-first with React Server Components, supports `layout.js`, `loading.js`, `error.js`, `not-found.js`, and allows direct `async`/`fetch` for data fetching.