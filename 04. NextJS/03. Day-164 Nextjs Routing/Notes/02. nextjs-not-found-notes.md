
# 📝 Next.js `not-found.js` — Important Notes

---

## 🔹 1. Purpose

* Special file in the **App Router** used for **404 (Page Not Found)**.
* Automatically rendered when:

  * The user visits a non-existing path inside that route segment.
  * You explicitly call `notFound()` in your code.

---

## 🔹 2. Placement & Scope

* File name must be exactly **`not-found.js`** (or `.tsx`).
* Can exist at multiple levels:

  * `app/not-found.js` → global fallback.
  * `app/courses/not-found.js` → applies only to `/courses/*`.
* Next.js always picks the **nearest `not-found.js`** up the route tree.

📂 Example:

```
app/
 ├─ not-found.js        // global 404
 └─ courses/
     ├─ not-found.js    // specific 404 for courses
     └─ [id]/
         └─ page.js
```

---

## 🔹 3. Triggering 404

Use the helper function from `next/navigation`:

```js
import { notFound } from 'next/navigation';

export default async function Page({ params }) {
  const post = await getPost(params.id);
  if (!post) notFound();   // Shows nearest not-found.js
  return <div>{post.title}</div>;
}
```

* Commonly used when **data fetching fails** (e.g., blog post doesn’t exist).
* Works in **Server Components** (during render/data fetch).

---

## 🔹 4. Behavior & SEO

* Displays your custom `not-found.js` UI.
* Injects `<meta name="robots" content="noindex" />` automatically → prevents missing pages from being indexed.
* ⚠️ **Status code nuance**:

  * Normally returns HTTP `404`.
  * In **streaming mode**, sometimes returns `200` but shows the 404 UI (important for SEO — test with `curl`).

---

## 🔹 5. Difference from `error.js`

| File               | Purpose                                                                    |
| ------------------ | -------------------------------------------------------------------------- |
| **`not-found.js`** | Missing resource (404). Called with `notFound()`.                          |
| **`error.js`**     | Runtime/rendering error (crash, exception). Provides recovery (`reset()`). |

👉 Use `not-found.js` when **content doesn’t exist**, `error.js` when **something broke**.

---

## 🔹 6. Best Practices

* ✅ Always include a clear `<h1>` like *“404 — Page not found”*.
* ✅ Offer navigation back (Home, Courses, Search).
* ✅ Keep it lightweight and accessible (screen readers should announce).
* ✅ Add localized versions if your app supports i18n (`app/[lang]/not-found.js`).
* ✅ For segment-specific UX, place nested `not-found.js` (e.g., courses-specific 404).

---

## 🔹 7. Quick Example `not-found.js`

```jsx
export default function NotFound() {
  return (
    <main className="flex flex-col items-center justify-center py-20">
      <h1 className="text-3xl font-bold">404 — Page not found</h1>
      <p className="mt-4 text-gray-600">Sorry, we couldn’t find that page.</p>
      <a href="/" className="mt-6 text-blue-500 underline">Go back home</a>
    </main>
  );
}
```

---

✅ With these notes, you’ve got both the **short essentials** and the **in-depth details** you need for interviews, debugging, and project work.

---